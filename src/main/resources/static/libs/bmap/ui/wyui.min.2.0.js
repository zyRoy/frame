var gConfig={overlayColor:"#000000",overlayOpacity:.5,overlayIndex:200,baseIndex:50,dialogIndex:210,alertIndex:250},icoDef={close:"zmdi zmdi-close",full:"zmdi zmdi-fullscreen",fullOff:"zmdi zmdi-fullscreen-exit",max:"zmdi zmdi-window-maximize",maxOff:"zmdi zmdi-window-restore",refresh:"zmdi zmdi-refresh",previous:"zmdi zmdi-chevron-left",next:"zmdi zmdi-chevron-right",chevronLeft:"zmdi zmdi-chevron-left",chevronRight:"zmdi zmdi-chevron-right",chevronUp:"zmdi zmdi-chevron-up",chevronDown:"zmdi zmdi-chevron-down",resizeHandle:"zmdi zmdi-filter-list",search:"fa fa-search"},classDef={source:"wy-ui-source",closable:"closable",footer:"wy-footer",state:{active:"active",hover:"hover",selected:"selected",disable:"disable"}},wyHelper={overlayCounter:0,isDebug:!0,time:function(a){wyHelper.isDebug&&console.time(a)},end:function(a){wyHelper.isDebug&&console.timeEnd(a)},info:function(a){wyHelper.isDebug&&console.info(a)},toFullScreen:function(a){},setGlobal:function(a){for(var b in a)gConfig[b]=a[b]},getBody:function(){var a=$(document.body);return $(window.top.document.body)&&(a=$(window.top.document.body)),a},hasTop:function(){return!(window.top===window)},getOverlay:function(a){var b=$(document.body);a||$(window.top.document.body)&&(b=$(window.top.document.body));var c=b.find("#wy-ui-overlay");return(!c||c.length<1)&&(c=$("<div id='wy-ui-overlay' class='user-select-none'></div>").appendTo(b),c.css({"background-color":gConfig.overlayColor,opacity:gConfig.overlayOpacity,"z-index":gConfig.overlayIndex})),c},showOverlay:function(){wyHelper.getOverlay().fadeIn(),wyHelper.overlayCounter++},hideOverlay:function(){wyHelper.overlayCounter--,0==wyHelper.overlayCounter&&wyHelper.getOverlay().fadeOut()},scroll:function(a,b){return b||(b={theme:"dark",scrollInertia:0,keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"}}),$(a).mCustomScrollbar(b),$(a).find(".mCSB_container")},escapeRegExp:function(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},escapeHTML:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>")},dateFormat:function(a,b){var c,d={"y+":a.getFullYear(),"M+":a.getMonth()+1,"d+":a.getDate(),"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"S+":a.getMilliseconds()};for(var e in d)for(;new RegExp("("+e+")").test(b);)c=1==RegExp.$1.length?d[e]:("0000000000".substring(0,RegExp.$1.length)+d[e]).substr((""+d[e]).length),b=b.replace(RegExp.$1,c+"");return b},fillString:function(a,b){for(var c in a)b=b.replace(new RegExp("{{"+c+"}}","ig"),a[c]);return b},unionObjects:function(){var a=arguments;if(0==a.length)return{};if(1==a.length)return a[0];for(var b=null,c=0;c<a.length;c++)b=null!=b?wyHelper.unionObject(b,a[c]):a[c];return b},unionObject:function(a,b){var c={};if(a)for(var d in a)c[d]=a[d];for(var d in b)c[d]||(c[d]=b[d]);return c},list2Tree:function(a,b){return b||(b={}),wyHelper.getTree(a,b.pid,b.idname,b.pidname)},getTree:function(a,b,c,d){var e,f,g,h,i=[],j=[];if(c||(c="ID"),d||(d="PID"),!b)for(var k=0;k<a.length;k++){e=a[k],g=!1;for(var l=0;l<a.length;l++)if(f=a[l],e[c]!=f[c]&&e[d]==f[c]){g=!0;break}if(0==g){for(var m=!1,n=0;n<j.length;n++)if(j[n]==e[d]){m=!0;break}m||j.push(e[d])}}if(b)for(var k=0;k<a.length;k++)e=a[k],e[d]==b&&(h=wyHelper.getTree(a,e[c],c,d),h&&h.length>0&&(e.children=h),i.push(e));if(null!=j&&j.length>0)for(var l=0;l<j.length;l++)for(var k=0;k<a.length;k++)e=a[k],e[d]==j[l]&&(h=wyHelper.getTree(a,e[c],c,d),h&&h.length>0&&(e.children=h),i.push(e));return i},animationEndEvent:function(){var a,b=document.createElement("div"),c={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(a in c)if(void 0!==b.style[a])return c[a];return!1},isMouseIn:function(a,b){var c=a.offset();return b.pageX<c.left||b.pageX>c.left+a.width()||b.pageY<c.top||b.pageY>c.top+a.height()?!1:!0}};$.widget("wy.base",{_getElementOpt:function(a,b){b?this.element.attr(a)&&(this.options[a]=this.element.attr(a)):null==this.options[a]&&this.element.attr(a)&&(this.options[a]=this.element.attr(a))}}),Array.prototype.remove=function(a,b){for(var c=b?b:function(a,b){return a==b},d=0;d<this.length;d++)c(a,this[d])&&this.splice(d,1)},Array.prototype.isContains=function(a){return wyHelper.inArray(this,a)},String.prototype.fill=function(a){return wyHelper.fillString(a,this)};var wyForm={getFormJsonData:function(a){var b={},c="name";return a.find("input[type=text],input[type=password],input[type=hidden],input[type=number]").each(function(){c=$(this).attr("alias")?"alias":"name",$(this).attr(c)&&$(this).val()&&null!=$(this).val()&&""!=$.trim($(this).val())&&(b[$(this).attr(c)]=$(this).val())}),a.find("select").each(function(){c=$(this).attr("alias")?"alias":"name",$(this).attr(c)&&$(this).val()&&null!=$(this).val()&&""!=$.trim($(this).val())&&(b[$(this).attr(c)]=$(this).find("option:selected").val())}),a.find("textarea").each(function(){c=$(this).attr("alias")?"alias":"name",$(this).attr(c)&&$(this).val()&&null!=$(this).val()&&""!=$.trim($(this).val())&&(b[$(this).attr(c)]=$(this).val())}),a.find("input[type=checkbox]").each(function(){if(c=$(this).attr("alias")?"alias":"name",$(this).attr(c)){var d=$(this).attr(c);if(void 0!=b[d])return!0;var e=[];a.find("input["+c+"="+d+"]:checked").each(function(){e.push($(this).val())}),b[$(this).attr(c)]=e}}),b},fillView:function($target,data){if(!$target)throw new error("view target illegal!");if(!data)throw new error("view data illegal!");$target.find("span[name],div[name]").each(function(){var field=$(this).attr("name");$(this).html(eval("data."+field)?eval("data."+field):"暂无")})},fillForm:function($targetForm,data){return $targetForm?data?($targetForm.find("input[type=text],textarea,input[type=hidden]").each(function(){var field=$(this).attr("name");$(this).val(eval("data."+field)?eval("data."+field):"")}),$targetForm.find("input[type=number]").each(function(){var field=$(this).attr("name");$(this).val(eval("data."+field)?eval("data."+field):"0")}),$targetForm.find("span[name],div[name]").each(function(){var field=$(this).attr("name");$(this).html(eval("data."+field)?eval("data."+field):"")}),$targetForm.find("select").each(function(){var field=$(this).attr("name");eval("data."+field+"_VALUE")?$(this).wyDropdown("selectValue",eval("data."+field+"_VALUE")):eval("data."+field)?$(this).wyDropdown("selectText",eval("data."+field)):$(this).wyDropdown("selectValue","")}),void $targetForm.find("input[type=checkbox]").each(function(){var field=$(this).attr("name"),checkdata=eval("data."+field);checkdata&&(wyHelper.inArray(checkdata,$(this).val())||checkdata==$(this).val())?$(this).prop("checked",!0):$(this).prop("checked",!1)})):void $.error("参数data非法，未传入data参数"):void $.error("传入的$targetForm非法！")},resetForm:function(a){a.find("input[type=text],input[type=password]").each(function(){$(this).val("")}),a.find("select").each(function(){$(this).wyDropdown("selectValue","")}),a.find("textarea").each(function(){$(this).val("")})}};$(function(){$.prototype.getData=function(){return wyForm.getFormJsonData(this)},$.prototype.fillView=function(a){wyForm.fillView(this,a)},$.prototype.fill=function(a){wyForm.fillForm(this,a)},$.prototype.rest=function(){wyForm.resetForm(this)}}),$(function(){$.widget("wy.wyAlert",{options:{draggable:!0,resizeable:!1,alertClass:"default",okButton:"<button class='ok-button'><i class='fa fa-check' style='margin-right: 8px;'></i>确定</button>",cancelButton:"<button class='cancel-button '><i class='fa fa-close' style='margin-right: 8px;'></i>关闭</button>",vOffset:-100,hOffset:0,icons:{alert:"<i class='icon-bubble-alert'></i>",confirm:"<i class='icon-bubble-question'></i>",prompt:"icon-bubble-pencil"},effectIn:"wy-zoom-gl-out",effectOut:"zoom-out"},alert:null,buttonbar:null,_create:function(){this.element.addClass("wy-alert-container")},show:function(a,b,c,d,e,f){b=b?b:"",d=d.toLowerCase();var g="<div class='wy-alert "+this.options.alertClass+"' style='display:none;'>";g+="<i class='close fa fa-close'></i>",g+="<div class='wy-alert-icon'>"+(f?f:this.options.icons[d])+"</div>",g+="<div class='wy-alert-title'>"+a+"</div>",g+="<div class='wy-alert-message'>"+wyHelper.escapeHTML(b),g+="</div>",g+="<div class='wy-alert-buttonbar'>",g+="</div>",g+="</div>",wyHelper.getOverlay().show(),this.alert=$(g),this.buttonbar=this.alert.children(".wy-alert-buttonbar");var h=$(document.body);$(window.top.document.body)&&(h=$(window.top.document.body)),this.element.css("overflow","hidden"),this.element.append(this.alert).appendTo(h),this._addButtons(this.buttonbar,c,d),this._fixPostion(this.alert,e),this._bindEvents(c),this.alert.draggable({opacity:.95,handle:".wy-alert-icon"}),this.alert.show("zoomIn")},_fixPostion:function(a,b){var c,d;b||(c=$(window).height()/2-a.outerHeight()/2+this.options.vOffset,d=$(window).width()/2-a.outerWidth()/2+this.options.hOffset,0>c&&(c=0),0>d&&(d=0),a.css({top:c,left:d}))},_addButtons:function(a,b,c){var d=this;switch(c){case"alert":var e=$(this.options.okButton).appendTo(a).focus();e.click(function(){b&&b(!0),d._close()});break;case"confirm":var e=$(this.options.okButton).appendTo(a).focus();e.click(function(){b&&b(!0),d._close()});var f=$(this.options.cancelButton).appendTo(a).focus();f.click(function(){b&&b(!1),d._close()});break;case"prompt":var e=$(this.options.okButton).appendTo(a).focus();e.click(function(){b&&b(!0),d._close()});var f=$(this.options.cancelButton).appendTo(a).focus();f.click(function(){b&&b(!1),d._close()})}},_close:function(){var a=this;a._trigger("close",this),this.alert.hide(),a._destroy(),a.element.remove()},_bindEvents:function(a){var b=this;this.alert.children(".close").click(function(){a&&a(!1),b._close()})},_destroy:function(){this._super("_destroy")},gotoFront:function(){this.element.hasClass("wy-alert-back")&&this.element.removeClass("wy-alert-back")},gotoBack:function(){this.element.hasClass("wy-alert-back")||this.element.addClass("wy-alert-back")}}),$.wyAlert={alertStack:[],alert:function(a,b,c,d,e){var f=$("<div></div>").wyAlert({close:function(){$.wyAlert._closeHandler()}});f.wyAlert("show",a,b,c,"alert",d,e),$.wyAlert._addHandler(f)},confirm:function(a,b,c,d,e){var f=$("<div></div>").wyAlert({close:function(){$.wyAlert._closeHandler()}});f.wyAlert("show",a,b,c,"confirm",d,e),$.wyAlert._addHandler(f)},prompt:function(a,b,c,d,e){},_addHandler:function(a){if($.wyAlert.alertStack.length>0){var b=$.wyAlert.alertStack[$.wyAlert.alertStack.length-1];b.wyAlert("gotoBack")}$.wyAlert.alertStack.push(a)},_closeHandler:function(){if($.wyAlert.alertStack.length>0&&$.wyAlert.alertStack.splice($.wyAlert.alertStack.length-1,1),$.wyAlert.alertStack.length>0){var a=$.wyAlert.alertStack[$.wyAlert.alertStack.length-1];a.wyAlert("gotoFront")}else wyHelper.getOverlay().fadeOut()}}}),$(function(){var a=function(a,b,c,d){var e="in";a&&(e=a),b.removeClass("animated"),b.attr("animateClass")&&b.removeClass(b.attr("animateClass")),b.addClass("animated").addClass(c),b.attr("animateClass",c),"in"==e&&b.show(),b.on("webkitAnimationEnd",function(){"out"==e&&b.hide(),d&&d.call()})};$.prototype.show=function(b){return function(c,d){return c?a("in",this,c,d):b.call(this),this}}($.prototype.show)}),$.widget("wy.wyButton",{options:{clazz:"",animate:null,toggle:!1},_create:function(){this.element.addClass("wy-button user-select-none wy-ts-color"),!this.element.hasClass("animated")&&this.element.hasClass("ripple")&&this._createRipple()},_createRipple:function(){this.element.mousedown(function(a){var b=wyHelper.animationEndEvent();if(b){var c=a.pageX,d=a.pageY,e=$(this).offset().left,f=$(this).offset().top;if(!($(this).children(".ripple-circle").length>3)){var g=$("<div class='ripple rippleIn ripple-circle'></div>");g.css({left:c-e-15,top:d-f-15}),b&&g.on(b,function(){$(this).remove()}),$(this).append(g)}}})}}),$(function(){$.widget("wy.wyCheckbox",{options:{colorStyle:null},container:null,source:null,checkTrigger:null,label:null,_create:function(){this.element.attr("colorStyle")&&(this.options.colorStyle=this.element.attr("colorStyle")),this._createUI(),this._bindEvents()},_createUI:function(){this.label=this.element.next("label"),this.element.wrap("<div class='wy-checkbox'><span class='wy-source wy-checkbox-source'></span></div>"),this.container=this.element.closest(".wy-checkbox"),this.source=this.container.children(".wy-checkbox-source"),this.checkTrigger=$("<span class='wy-checkbox-trigger user-select-none'><i class='fa fa-check'></i></span>").appendTo(this.container),this.label.appendTo(this.container),this.element.is(":checked")&&this.container.addClass("checked"),this.element.is(":disabled")&&this.container.addClass("disabled"),this.options.colorStyle&&this._setColorStyle(this.options.colorStyle)},_bindEvents:function(){this.__bindEvents4Target(this.checkTrigger),this.__bindEvents4Target(this.label)},__bindEvents4Target:function(a){if(a){var b=this;a.hover(function(){b.element.is(":disabled")||b.container.addClass("hover")},function(){b.container.removeClass("hover")}).click(function(a){a.stopPropagation(),b.element.is(":disabled")||b._toggleCheck()})}},_setColorStyle:function(a){this.checkTrigger.css("border-color",a),this.checkTrigger.children("i").css("background-color",a)},_triggerChange:function(a){var b=this;this.element.trigger("change"),this._trigger("change",null,{checked:b.isChecked(),value:b.source.val(),target:b.container})},_toggleCheck:function(a){this.isChecked()?this.unCheck(a):this.check(a)},check:function(a){this.setCheck(!0,a)},unCheck:function(a){this.setCheck(!1,a)},setCheck:function(a,b){a?this.container.hasClass("checked")||(this.container.addClass("checked"),this.element.prop("checked",!0),b||this._triggerChange()):this.container.hasClass("checked")&&(this.container.removeClass("checked"),this.element.prop("checked",!1),b||this._triggerChange())},toggleCheck:function(){this._toggleCheck()},isChecked:function(){return this.container.hasClass("checked")},disable:function(){this.container.addClass("disabled"),this.element.attr("disabled","disabled")},enable:function(){this.container.removeClass("disabled"),this.element.removeAttr("disabled")}})}),$(function(){$.widget("wy.wyDatatable",{options:{columns:[],paginator:null,datasource:null,nodataTips:"暂无数据",sequenceColumn:"auto",checkColumn:"ID",checkUnionRowSelect:"true",selectionMode:"single",rowSelectUnionCheck:!0,rowEditRender:null,cellboder:"both",intervalRow:!0,customerRender:null,rowCheck:null,sortRange:"current",hasLock:!0,colorStyle:null},container:null,header:null,body:null,bodyContainer:null,footer:null,paginator:null,startColIndex:0,rows:null,data:null,hideCols:[],_init:function(){},_create:function(){if(this.hideCols=[],wyHelper.time("datatable"),this.data=this.options.datasource,"div"==this.element.prop("tagName").toLowerCase()&&(this.container=this.element,this.container.addClass("wy-datatable"),this._createUIWithDiv()),"table"==this.element.prop("tagName").toLowerCase()&&(this.container=this.element.wrap("<div class='wy-datatable'></div>").closest(".wy-datatable"),this.container.attr("style",this.element.attr("style")),this._createUIWithTable()),this._adjustPosition(),this._createSequenceCol(),this._createCheckCol(),this._createSortableCol(),this._bindEvents(),this._renderData(),this.options.cellboder)switch(this.options.cellboder){case"both":this.container.addClass("border-both");break;case"header":this.container.addClass("border-header");break;case"body":this.container.addClass("border-body")}this.options.intervalRow&&this.container.addClass("odd-even-row"),this._adjustColumnWidths()},_destroy:function(){this.container=null,this.header=null,this.body=null,this.bodyContainer=null,this.footer=null,this.paginator=null,this.startColIndex=0,this.rows=null,this.data=null,this.hideCols=[]},_createUIWithDiv:function(){if(0==this.options.columns.length)throw new Error("datatable column undefined!");for(var a="<div class='wy-datatable-header'><table cellpadding='0' cellspacing='0'><thead><tr>",b=0;b<this.options.columns.length;b++)this.options.columns[b].sortable?(a+="<th sortable='true'",this.options.columns[b].sortType&&(a+=" sortable='true' sort-type='"+this.options.columns[b].sortType+"'",a+=" class='sort-cell'")):a+="<th",this.options.columns[b].columnWidth&&(a+=" width='"+this.options.columns[b].columnWidth+"'"),this.options.columns[b].columnHeaderClass&&(a+=" class='"+this.options.columns[b].columnHeaderClass+"'"),this.options.columns[b].columnHeaderStyle&&(a+=" style='"+this.options.columns[b].columnHeaderStyle+"'"),this.options.columns[b].columnHeaderWidth&&(a+=" width='"+this.options.columns[b].columnHeaderWidth+"'"),a+="><span>"+this.options.columns[b].headerText+"</span></th>";a+="</tr></thead></table></div>",this.header=$(a).appendTo(this.container),this.body=$("<div class='wy-datatable-body'></div>").append($("<table cellpadding='0' cellspacing='0'><tbody></tbody></table>")).appendTo(this.container),this.header&&this.body.css("top",this.header.outerHeight()),this.bodyContainer=wyHelper.scroll(this.body)},_createUIWithTable:function(){{var a=this.element.find("thead").remove(),b=this.element.find("tbody").remove();this.element.find("tfoot").remove()}this.container.append($("<span class='wy-datatable-source'></span>").append(this.element.css("display","none"))),this.header=$("<div class='wy-datatable-header'></div>").append($("<table cellpadding='0' cellspacing='0'></table>").append(a)).appendTo(this.container),this.body=$("<div class='wy-datatable-body'></div>").append($("<table cellpadding='0' cellspacing='0'></table>").append(b)).appendTo(this.container),this.bodyContainer=wyHelper.scroll(this.body)},_adjustPosition:function(){var a=0;this.footer&&(a+=this.footer.height()),this.paginator&&(a+=this.paginator.height()),this.body&&this.body.css("bottom",a)},_adjustColumnWidths:function(){if(this.header&&this.body){var a=this;this.header.find("th").each(function(){var b=$(this),c=b.index(),d=b.innerWidth();a.body.find("tr:first td").eq(c).width(d)})}},_createSequenceCol:function(){if(this.header&&this.options.sequenceColumn&&"null"!=this.options.sequenceColumn){var a=this.header.find("tr"),b="<i class='icon icon-unlock wy-datatable-rowLock'></i>";this.options.hasLock||(b="<i class='icon icon-unlock wy-datatable-rowLock' style='display: none;'></i><i class='fa fa-sort-numeric-asc'></i>"),a.prepend("<th class='sequence-column'>"+b+"</th>"),this.body&&(this.body.find("tr").each(function(a){$(this).prepend("<td class='sequence-column'>"+(a+1)+"</td>")}),this.startColIndex++)}},_createCheckCol:function(){if(this.header&&this.options.checkColumn&&"null"!=this.options.checkColumn){var a=this.header.find("tr"),b=this.header.find(".sequence-column");b?b.after("<th class='check-column'><input type='checkbox'/></th>"):a.prepend("<th class='check-column'><input type='checkbox'/></th>"),this.body&&(this.body.find("tr").each(function(a){b=$(this).find(".sequence-column"),b?b.after("<td class='check-column'><input type='checkbox'/></td>"):$(this).prepend("<td class='check-column'><input type='checkbox'/></td>")}),this.startColIndex++)}},_createSortableCol:function(){if(this.header){var a,b=this.header.find("th[sortable=true]");b.each(function(){a="<span class='column-sort'>",a+="<i class='column-asc fa fa-angle-up'  style='display: none;'/>",a+="<i class='column-sort-original fa fa-ellipsis-v'/>",a+="<i class='column-desc fa fa-angle-down' style='display: none;'/>",a+="</span>",$(this).append(a)})}},_renderData:function(){if(this.data){var a=this.bodyContainer.find("tbody");if(a.html(""),$.isArray(this.data)){if(0==this.data.length)a.html("<tr><td colspan='"+(this.options.columns.length+this.startColIndex)+"'>"+this.options.nodataTips+"</td></tr>");else for(var b=0;b<this.data.length;b++)this.__addDataRow(this.data[b],b);this.options.customerRender&&this.options.customerRender()}if(this._adjustColumnWidths(),this.options.checkColumn){var c={};this.options.colorStyle&&(c={colorStyle:this.options.colorStyle}),this.container.find(".check-column input[type=checkbox]").wyCheckbox(c)}}},_sortTable:function(a,b,c,d,e){if("all"===this.options.sortRange)return void this._trigger("columnSort",null,{sortType:b,sortOrder:1==c?"ASC":"DESC",sortColumnIndex:a-this.startColIndex,sortColumnField:this.options.columns[a-this.startColIndex].field});var f,g=[],h=this.bodyContainer.find("tr");f=d?function(a,b){return c*d(a,b)}:function(a,b){var d=a.value,e=b.value,f=e>d?-1:d>e?1:0;return c*f},h.each(function(){g.push({rowIndex:$(this).index(),value:$(this).find("td").eq(a).text()})}),g.sort(f);for(var i=0;i<g.length;i++)this.bodyContainer.find("tbody").append(h[g[i].rowIndex])},_bindEvents:function(){var a=this;this.header.find(".wy-datatable-rowLock").click(function(){$(this).closest("tr").toggleClass("locked"),$(this).toggleClass("icon-unlock").toggleClass("icon-lock")}),this.header.find(".column-sort").click(function(){var b=$(this).closest("tr");if(!b.hasClass("locked")){a.header.find(".column-sort").removeClass("sorted").find(".column-sort-original").show(),a.header.find(".column-sort").find(".column-asc").hide(),a.header.find(".column-sort").find(".column-desc").hide();var c,d=$(this).closest("th"),e=d.attr("sort-type"),f=$(this).attr("sort-order");$(this).children(".fa-sort").hide(),f&&"desc"!=f?($(this).attr("sort-order","desc").addClass("sorted"),f=-1,$(this).children(".column-sort-original").hide(),$(this).children(".column-asc").hide(),$(this).children(".column-desc").show()):($(this).attr("sort-order","asc").addClass("sorted"),f=1,$(this).children(".column-sort-original").hide(),$(this).children(".column-desc").hide(),$(this).children(".column-asc").show()),c=d.index(),a._sortTable(c,e,f,null,event)}}),this.container.resize(function(){a.adjustColumnWidths()}),this.header.find(".check-column input[type=checkbox]").bind("change",function(){var b=a.bodyContainer.find(".check-column input[type=checkbox]");b.each($(this).prop("checked")?function(){$(this).wyCheckbox("check",!0)}:function(){$(this).wyCheckbox("unCheck",!0)}),a._trigger("rowCheck",null,null)})},__addDataRow:function(a,b){var c="<tr>";if(this.options.sequenceColumn){var d="auto"==this.options.sequenceColumn?b+1:a[this.options.sequenceColumn];c+="<td class='sequence-column'><i>"+d+"</i></td>"}if(this.options.checkColumn){var e=a[this.options.checkColumn];c+="<td class='check-column'><input type='checkbox' value='"+e+"'/></td>"}for(var f,g=0;g<this.options.columns.length;g++)f=this.options.columns[g],c+="<td>",c+=f.content?f.content(a,b)+"</td>":f.field?a[f.field]+"</td>":"</td>";c+="</tr>",$(c).data("data",a).appendTo(this.bodyContainer.find("tbody"))},setDataSource:function(a){var b=this;this.data=a,this._renderData(),this.bodyContainer.find(".check-column input[type=checkbox]").bind("change",function(){b.getCheckValues().length==b.getRowCount()&&b.header.find(".check-column input[type=checkbox]").wyCheckbox("check"),0==b.getCheckValues().length&&b.header.find(".check-column input[type=checkbox]").wyCheckbox("unCheck"),b._trigger("rowCheck",null,null)}),this.bodyContainer.find("tr").bind("click",function(){var a=b.bodyContainer.find("tr").index($(this));$(this).hasClass("selected")?b.unselectRow(a):b.selectRow(a)}),this.hideCols.length>0&&this.hideColumns(this.hideCols),this.header.find(".check-column input[type=checkbox]").wyCheckbox("unCheck"),this._adjustColumnWidths()},adjustColumnWidths:function(){this._adjustColumnWidths()},hideColumn:function(a){this.header.find("tr th").eq(a).hide(),this.body.find("tr").each(function(){$(this).children("td").eq(a).hide()}),this._adjustColumnWidths(),wyHelper.inArray(this.hideCols,a)||this.hideCols.push(a)},showColumn:function(a){this.header.find("tr th").eq(a).show(),this.body.find("tr").each(function(){$(this).children("td").eq(a).show()}),wyHelper.inArray(this.hideCols,a)&&this.hideCols.remove(a),this._adjustColumnWidths()},hideColumns:function(a){if(a){for(var b,c=0;c<a.length;c++)b=a[c],this.header.find("tr th").eq(b).hide(),this.body.find("tr").each(function(){$(this).children("td").eq(b).hide()}),wyHelper.inArray(this.hideCols,b)||this.hideCols.push(b);this._adjustColumnWidths()}},showColumns:function(a){if(a){for(var b,c=0;c<a.length;c++)b=a[c],this.header.find("tr th").eq(b).show(),this.body.find("tr").each(function(){$(this).children("td").eq(b).show()}),wyHelper.inArray(this.hideCols,b)&&this.hideCols.remove(b);this._adjustColumnWidths()}},appendRow:function(a){var b=this.bodyContainer.find("tbody>tr").length;this.__addDataRow(a,b),this.options.checkColumn&&this.container.find(".check-column input[type=checkbox]").wyCheckbox()},getCheckValues:function(){var a=[];return this.bodyContainer.find(".check-column input:checked").each(function(){a.push($(this).val())}),a},getRowCount:function(){return this.bodyContainer.find("tbody tr").length},selectRow:function(a,b){var c=this.bodyContainer.find("tbody tr").eq(a);this.bodyContainer.find("tbody tr").removeClass("selected"),c.addClass("selected"),b||this._trigger("rowSelect",null,{data:c.data("data"),ui:c})},unselectRow:function(a,b){var c=this.bodyContainer.find("tbody tr").eq(a);c.removeClass("selected"),b||this._trigger("rowUnselect",null,{data:c.data("data"),ui:c})},clearSelectRow:function(a){var b=this.bodyContainer.find("tbody tr");b.removeClass("selected")},getVisibleColumnCount:function(){return this.header.find("th:visible").length},getSelectedRowData:function(){var a=this.bodyContainer.find("tbody tr[class~=selected]");return a&&a.data("data")?a.data("data"):null},getDataSource:function(){return this.data}})}),$.widget("wy.wyDialog",{options:{modal:!0,draggable:!0,resizable:!0,awaysOnTop:!0,parent:null,offsetX:0,offsetY:-50,scroll:"y",button:{full:!0,refresh:!0,close:!0},hasHeader:!0,buttonAlign:"right",defaultClose:null,bridge:null},parts:{base:"wy-dialog",header:"wy-dialog-header",caption:"wy-dialog-caption",headerButtonBar:"wy-dialog-title-buttonbar",customerBar:"wy-dialog-header-customer",close:"wy-dialog-close",full:"wy-dialog-full",refresh:"wy-dialog-refresh",content:"wy-dialog-content",footer:"wy-dialog-footer"},icons:{close:icoDef.close,full:icoDef.full,fullOff:icoDef.fullOff,refresh:icoDef.refresh,resizeHandle:icoDef.resizeHandle},content:null,header:null,footer:null,contentContainer:null,_create:function(){this.element.addClass(this.parts.base).addClass(this.options.theme),this._createUI(),this._bindEvent()},_createUI:function(){var a,b,c=this.element.attr("title")?this.element.attr("title"):"",d="";this.element.removeAttr("title"),this.options.button.full&&(d+="<span class='"+this.parts.full+"'><i class='"+this.icons.full+"'></i></span>"),this.options.button.refresh&&(d+="<span class='"+this.parts.refresh+"'><i class='"+this.icons.refresh+"'></i></span>"),this.options.button.close&&(d+="<span class='"+this.parts.close+"'><i class='"+this.icons.close+"'></i></span>"),a="<div class='"+this.parts.header+"'><span class='"+this.parts.caption+"'>"+c+"</span><span class='"+this.parts.headerButtonBar+"'>"+d+"</span></div>",b="<div class='"+this.parts.content+"'></div>",this.header=$(a),this.element.contents().wrapAll(b),this.content=this.element.children("."+this.parts.content),this.contentContainer=this.content,this.content.before(this.header),this.footer=this.content.find("."+this.parts.footer),this.footer&&this.content.after(this.footer),this.content.css("top",this.header.outerHeight()),this.content.css("bottom",0),this.footer&&this.content.css("bottom",this.footer.outerHeight()),this.options.draggable&&this.element.draggable({opacity:.95,handle:"."+this.parts.header}),this.options.resizable&&(this.element.resizable(),this.element.children(".ui-resizable-se").append("<i class='"+this.icons.resizeHandle+"'></i>")),this.options.scroll,this.element.hide()},_bindEvent:function(){var a=this;if(this.header.find("."+this.parts.close).click(function(){a.hide()}),this.options.defaultClose){var b=null;b=this.options.defaultClose instanceof jQuery?this.options.defaultClose:$(this.options.defaultClose),b.click(function(){a.hide()})}},_adjustPosition:function(){var a,b,c;c=this.options.parent?this.options.parent:$(window.top?window.top:window),a=c.height()/2-this.element.outerHeight()/2+this.options.offsetY,b=c.width()/2-this.element.outerWidth()/2+this.options.offsetX,0>a&&(a=0),0>b&&(b=0),this.element.css({top:a,left:b})},show:function(){this.options.modal&&wyHelper.showOverlay(),this.element.css("z-index",gConfig.dialogIndex++),this.element.show(),this._adjustPosition(),this._trigger("open");var a;if(this.options.awaysOnTop&&(a=wyHelper.getBody(),wyHelper.hasTop())){if(this.options.bridge)for(var b in this.options.bridge)parent[b]=this.options.bridge[b];this.element.appendTo(a),this.options.draggable&&(this.element.draggable("destroy"),this.element.draggable({opacity:.95,handle:"."+this.parts.header})),this.options.resizable&&(this.element.resizable("destroy"),this.element.resizable(),this.element.children(".ui-resizable-se").append("<i class='"+this.icons.resizeHandle+"'></i>"))}this.options.scroll&&(this.content=wyHelper.scroll(this.contentContainer))},hide:function(){if(this.options.modal&&wyHelper.hideOverlay(),gConfig.dialogIndex--,this.element.hide(),this._trigger("close"),this.options.awaysOnTop&&wyHelper.hasTop()&&this.options.bridge)for(var a in this.options.bridge)parent[a]=null;var b=$("body");this.element.appendTo(b)},open:function(){this.show()},close:function(){this.hide()}}),$(function(){$.widget("wy.wyDropdown",{options:{width:150,itemRenderer:null,popHeight:150,filter:!1,customerFilter:null,mutil:!1,effect:"fade",effectSpeed:200,groupCanSelect:!0,theme:null},pop:null,trigger:null,label:null,content:null,listContainer:null,choices:null,filter:null,fnShowEffect:null,fnHideEffect:null,changeFromUI:!0,_init:function(){this.pop&&this.pop.css({"max-height":this.options.popHeight}),this.options.groupCanSelect?this.content.find(".wy-dropdown-list-group-header").addClass("selectable"):this.content.find(".wy-dropdown-list-group-header").removeClass("selectable")},_initOptions:function(){this.options.theme=this.element.attr("theme")?this.element.attr("theme"):this.options.theme},_create:function(){this._initOptions(),this._createUI(),this._bindEvents(),this._initListFromSource(),this._selectDefault()},_createUI:function(){this.element.hasClass("wy-dropdown")&&this.element.removeClass("wy-dropdown"),this.options.width=this.element.width(),this.choices=this.element.children("option"),this.element.wrap("<div class='wy-dropdown' style='width: "+this.options.width+"px;'><span class='wy-source wy-dropdown-source'></span></div>"),this.content=this.element.closest(".wy-dropdown"),this.label=$(this.options.mutil?"<ul class='wy-dropdown-display'><input type='text'/></ul>":"<div class='wy-dropdown-display'></div>").appendTo(this.content),this.trigger=$("<div class='wy-dropdown-trigger'><i class='fa fa-angle-down'></i></div>").appendTo(this.content);var a=this.options.filter?"<div class='wy-dropdown-filter'><i class='fa fa-search'></i><input placeholder='输入内容过滤列表' /></div>":"";this.pop=$("<div class='wy-dropdown-pop "+(this.options.filter?"has-filter":"")+"' style='max-height: "+this.options.popHeight+"px;'>"+a+"<div class='wy-dropdown-list-box'><ul class='wy-dropdown-list'></ul></div></div>"),this.pop.addClass(this.options.theme),this.content.append(this.pop),this.listContainer=this.pop.find("ul");var b=this.element.attr("style");b&&-1!=b.indexOf("width")?this.content.attr("style",b):this.content.width(this.element.outerWidth(!0)+5),this.element.css("display","none"),this.options.theme&&this.content.addClass(this.options.theme),this.filter=this.pop.find(".wy-dropdown-filter").children("input"),this.filter.css("width",this.element.outerWidth(!0)-45)},_bindEvents:function(){var a=this,b=this.options.effectSpeed,c=this.options.customerFilter;this.trigger.click(function(c){c.stopPropagation(),a._showPop(b)}),this.label.click(function(c){c.stopPropagation(),a._showPop(b)}),this.filter.bind("input propertychange",function(){var b=$(this).val();return""==jQuery.trim(b)?(a.listContainer.find(".wy-dropdown-list-leaf").each(function(){
$(this).text($(this).text())}),void a.listContainer.find(".wy-dropdown-list-leaf").show()):void a.listContainer.find(".wy-dropdown-list-leaf").each(function(){var d=!0,e=$(this).data("data");e.text=e.text?e.text:$(this).text(),e.value=e.value?e.value:$(this).data("value"),d=c?c(b,$(this).data("data")):a._defaultFilter(b,$(this).data("data")),d?($(this).html($(this).text().replace(new RegExp(b,"ig"),"<span class='search-key'>"+b+"</span>")),$(this).show()):$(this).hide()})}),$(document.body).bind("mousedown",function(c){if(c.stopPropagation(),!a.pop.is(":hidden")){var d=a.pop.offset();c.target!==a.label.get(0)&&c.target!==a.trigger.get(0)&&c.target!==a.content.children().get(0)&&(c.pageX<d.left||c.pageX>d.left+a.pop.width()||c.pageY<d.top||c.pageY>d.top+a.pop.height())&&(a.pop.fadeOut(b),a.content.removeClass("pop-showing-up").removeClass("pop-showing-down"))}})},_defaultFilter:function(a,b){return b.value.indexOf(a)>-1||b.text.indexOf(a)>-1?!0:!1},_showPop:function(a){var b=this;if(!this.element.is(":disabled")){var c=this.pop.outerHeight()-this.pop.find(".wy-dropdown-filter").outerHeight()-2;this.pop.find(".wy-dropdown-list-box").css("height",c);var d="down",e=b.content.height();b.content.offset().top+b.content.height()+b.pop.height()>$(window).height()&&(e=-1-b.pop.height(),d="up");var f=-1;b.pop.css("z-index",wyHelper.WY_BASE_INDEX+50).css("left",f).css("top",e).css("width",b.content.width()),b.pop.is(":hidden")?(b.pop.show(),b.content.addClass("pop-showing-"+d)):(b.pop.hide(),b.content.removeClass("pop-showing-up").removeClass("pop-showing-down"))}},_bindSelectItemEvent:function(a){var b=this,c=$(a),d=this.options.effectSpeed;c.click(function(a){b.pop.find(".wy-dropdown-list-item-selected").removeClass("wy-dropdown-list-item-selected"),$(this).addClass("wy-dropdown-list-item-selected"),b.label.text($(this).text()),b.pop.fadeOut(d),b.content.removeClass("pop-showing-up").removeClass("pop-showing-down"),b.element.find("option[selected=selected]").prop("selected",!1),""==c.data("value")?b.element.find("option[value='']").prop("selected",!0):b.element.find("option[value="+c.data("value")+"]").prop("selected",!0),b._trigger("change",a,{value:c.data("value"),changeFromUI:b.changeFromUI}),b.element.trigger("change")})},_initListFromSource:function(){var a,b,c,d,e=this,f=this.element.children();f&&f.each(function(){d={value:$(this).val(),text:$(this).text()},$(this).is("optgroup")?(a=e._addGroup($(this).attr("label"),$(this).attr("value")),b=$(this).children("option"),b.each(function(){c=e._addOption($(this).text(),$(this).val(),a.children("ul"),d)})):c=e._addOption($(this).text(),$(this).val(),null,d)}),wyHelper&&(wyHelper.scroll(this.pop.find(".wy-dropdown-list-box")),this.pop.hide())},_addOption:function(a,b,c,d){var e=c||this.listContainer,f=this.options.itemRenderer?this.options.itemRenderer(d):a,g=$("<li class='wy-dropdown-list-leaf selectable'>"+f+"</li>");return g.data("value",b),g.data("data",d),g.appendTo(e),this._bindSelectItemEvent(g),1==this.element.find("option").length&&this._selectDefault(),g},_addGroup:function(a,b,c){var d=this.options.itemRenderer?this.options.itemRenderer(c):a,e=1==this.options.groupCanSelect?"selectable":"",f=$("<li class='wy-dropdown-list-group'><div class='wy-dropdown-list-group-header "+e+"'>"+d+"</div><ul></ul></li>").appendTo(this.listContainer);return f.children(".wy-dropdown-list-group-header").data("value",b).data("data",c),this.options.groupCanSelect&&(this.element.append("<option value='"+b+"'>"+a+"</option>"),this._bindSelectItemEvent(f.children(".wy-dropdown-list-group-header"))),f},_selectDefault:function(){this.changeFromUI=!1,this.pop.find(".selectable:first").click(),this.changeFromUI=!0},addOption:function(a,b,c,d){this.element.append($("<option value='"+b+"'>"+a+"</option>")),this._addOption(a,b,null,c)},getSelectedValue:function(){return this.element.val()},getSelectedLabel:function(){return this.choices.filter(":selected").text()},selectValue:function(a,b){var c=this;this.pop.find(".wy-dropdown-list-item-selected").removeClass("wy-dropdown-list-item-selected"),this.pop.find(".wy-dropdown-list-leaf").each(function(){$(this).data("value")==a&&($(this).addClass("wy-dropdown-list-item-selected"),c.label.text($(this).text()),c.element.find("option[selected=selected]").removeAttr("selected"),""==a?c.element.find("option[value='']").attr("selected",!0):c.element.find("option[value="+a+"]").attr("selected",!0),b||c.element.trigger("change"))})},selectText:function(a,b){var c=this;this.choices.each(function(){$(this).text()==a&&c.selectValue($(this).val(),b)})},removeAllOptions:function(){this.element.html(""),this.listContainer.html("")},reset:function(a){},enable:function(){this.content.removeClass("disabled"),this.element.removeAttr("disabled","disabled")},disable:function(){this.content.addClass("disabled"),this.element.attr("disabled","disabled")},show:function(){this.content.show()},hide:function(){this.content.hide()}})}),$(function(){$.widget("wy.wyGroupButton",{options:{mutiple:!1,toggle:!0,"default":0,theme:""},_buttons:null,_create:function(){this.element.addClass("wy-groupbutton").addClass(this.options.theme)},_init:function(){if(this._super("_init"),this._buttons=this.element.children("a"),this._buttons){if(this.options["default"]>-1){var a=this.element.children("a").eq(this.options["default"]);a&&this.element.children(".selected").length<1&&a.addClass("selected")}this._bindEvents()}},_bindEvents:function(){var a=this;this._buttons.click(function(b){$(this).hasClass("disabled")||(a.options.mutiple?$(this).toggleClass("selected"):(a._buttons.not($(this)).removeClass("selected"),a.options.toggle?$(this).toggleClass("selected"):$(this).addClass("selected")),a._trigger("click",b,{index:a._buttons.index($(this)),selected:$(this).hasClass("selected"),target:$(this)}))})},disable:function(){this.element.addClass("disabled")},enable:function(){this.element.removeClass("disabled")},select:function(a,b){if(this.options.mutiple||this._buttons.removeClass("selected"),!isNaN(a)){var c=a;if(this._buttons.eq(c).addClass("selected"),b)return;return void this._trigger("click",null,{index:c,selected:!0,target:$(this)})}a instanceof jQuery&&a.addClass("selected")},unselect:function(a,b){if(!isNaN(a)){var c=a;if(this._buttons.eq(c).removeClass("selected"),b)return;return void this._trigger("click",null,{index:c,selected:!1})}a instanceof jQuery&&a.removeClass("selected")}})}),$.widget("wy.wyInputtext",$.wy.base,{options:{preLab:null,sufLab:null,labSeparator:",",preIcon:null,sufIcon:null,button:null,buttonClass:null,buttonAction:null,dataSource:null,popItemRenender:null,popItemToText:null,theme:""},parts:{base:"wy-inputtext",origin:"wy-origin",source:"wy-source",preLab:"wy-prelab",sufLab:"wy-suflab",preIcon:"wy-preicon",sufIcon:"wy-suficon",button:"wy-inputtext-button",downTrigger:"wy-down-trigger",pop:"wy-inputtext-pop",popList:"wy-inputtext-pop-list",popListItem:"wy-inputtext-pop-list-item",loading:"wy-inputtext-loading",popUp:"wy-pop-direction-up",popDown:"wy-pop-direction-down",selected:"selected"},icons:{chevronDown:"fa fa-caret-down"},isOrigin:null,container:null,preLab:null,sufLab:null,preIcon:null,sufIcon:null,button:null,buttons:null,popBox:null,popCotent:null,autoCompleteData:null,_create:function(){this._initOptionsFromSource(),this._isOrigin()&&this.element.addClass(this.parts.base).addClass(this.parts.origin).addClass(this.options.theme)},_init:function(){this._isOrigin()||(this.element.removeClass(this.parts.base).removeClass(this.parts.origin).removeClass(this.options.theme),this.container||(this.container=this.element.wrap("<div class='"+this.parts.base+"'></div>").addClass(this.parts.source).closest("."+this.parts.base)),this._createUI()),this._bindEvents()},_initOptionsFromSource:function(){if(this._getElementOpt("labSeparator"),this._getElementOpt("preLab"),this._getElementOpt("sufLab"),this._getElementOpt("preIcon"),this._getElementOpt("sufIcon"),this._getElementOpt("button"),this._getElementOpt("buttonClass"),this._getElementOpt("buttonAction"),this._getElementOpt("preLabs"),this._getElementOpt("sufLabs"),this.options.preLab){var a=this.options.preLab.split(this.options.labSeparator);a.length>1&&(this.options.preLab=a)}if(this.options.sufLab){var b=this.options.sufLab.split(this.options.labSeparator);b.length>1&&(this.options.sufLab=b)}},_createUI:function(){this.container.addClass(this.options.theme),this._createLabel(),this._createIcon(),this._createButton(),this._createPop()},_createLabel:function(){if(this.preLab&&this.preLab.remove(),this.options.preLab)if(this.options.preLab instanceof Array){var a="<span class='"+this.parts.preLab+"'>"+this.options.preLab[0]+"<i class='"+this.parts.downTrigger+" "+this.icons.chevronDown+"'></i>"+this._createLabelDownlist(this.options.preLab)+"</span>";this.preLab=$(a),this.preLab.prependTo(this.container)}else this.preLab=$("<span class='"+this.parts.preLab+"'>"+this.options.preLab+"</span>").prependTo(this.container);if(this.sufLab&&this.sufLab.remove(),this.options.sufLab)if(this.options.preLab instanceof Array){var b="<span class='"+this.parts.sufLab+"'>"+this.options.sufLab[0]+"<i class='"+this.parts.downTrigger+" "+this.icons.chevronDown+"'></i>"+this._createLabelDownlist(this.options.sufLab)+"</span>";this.sufLab=$(b),this.sufLab.appendTo(this.container)}else this.sufLab=$("<span class='"+this.parts.sufLab+"'>"+this.options.sufLab+"</span>").appendTo(this.container)},_createLabelDownlist:function(a){for(var b="<ul style='display: none;'>",c=0;c<a.length;c++)b+="<li>"+a[c]+"</li>";return b+="</ul>"},_createIcon:function(){this.preIcon&&this.preIcon.remove(),this.options.preIcon&&(this.preIcon=$("<span class='"+this.parts.preIcon+"'><i class='"+this.options.preIcon+"'></i></span>").prependTo(this.container)),this.sufIcon&&this.sufIcon.remove(),this.options.sufIcon&&(this.sufIcon=$("<span class='"+this.parts.sufIcon+"'><i class='"+this.options.sufIcon+"'></i></span>").appendTo(this.container))},_createButton:function(){if(this.options.button)if(this.buttons&&this.buttons.remove(),this.button&&this.button.remove(),this.options.button instanceof Array){this.buttons=[];for(var _clickHanlder=null,i=0;i<this.options.button.length;i++){var _buttonClass=this.options.buttonClass instanceof Array?this.options.buttonClass[i]:this.options.buttonClass,button=$("<span class='"+this.parts.button+" "+_buttonClass+"'>"+this.options.button[i]+"</span>").appendTo(this.container);this.options.buttonAction&&(_clickHanlder=this.options.buttonAction[i],button.attr("action",_clickHanlder),button.click(function(){"string"==typeof $(this).attr("action")&&eval($(this).attr("action")).apply()})),this.buttons.push(button)}}else this.button=$("<span class='"+this.parts.button+" "+this.options.buttonClass+"'>"+this.options.button+"</span>").appendTo(this.container),this.options.buttonAction&&(_clickHanlder=this.options.buttonAction,this.button.click(function(){"string"==typeof _clickHanlder&&eval(_clickHanlder).apply()}))},_createPop:function(){this.popBox&&this.popBox.remove(),this.options.dataSource&&!this.popBox&&(this.popBox=$("<div style='display: none;'></div>"),this.popBox.addClass(this.parts.pop),this.popBox.appendTo(this.container),this.popBox.css("min-width",this.element.outerWidth()).css("left",this.element.position().left),this.popContent=wyHelper.scroll(this.popBox))},_showPop:function(){var a=this;if(!this.element.is(":disabled")){this.container.removeClass(this.parts.popUp).removeClass(this.parts.popDown);var b="down";a.container.offset().top+a.container.height()+a.popBox.height()>$(window).height()&&a.container.offset().top-a.popBox.height()>0&&(b="up"),a.popBox.show(),a.container.addClass("wy-pop-direction-"+b)}},_createPopList:function(a){var b=this,c=this.element.val();if(this.popContent.html(""),!a||a.length<1)return void this.popBox.hide();for(var d,e,f=$("<ul class='"+this.parts.popList+"'></ul>").appendTo(this.popContent),g=0;g<a.length;g++)e=this.options.popItemRenender?this.options.popItemRenender(c,a[g]):"<i class='"+icoDef.search+"' style='margin-right: 4px;'></i>"+(a[g]+"").replace(c,"<span class='filter-key'>"+c+"</span>"),d=$("<li class='"+this.parts.popListItem+"'>"+e+"</li>"),d.data("data",a[g]),f.append(d);f.find("li").click(function(){b.element.val(b._getItemText($(this))),b.popBox.hide()}),this._showPop()},_getItemText:function(a){var b=a.data("data");return this.element.data("data",b),this.options.popItemToText?this.options.popItemToText(b):b},_refreshDataSource:function(a){var b=this;if(""===jQuery.trim(a))return void(this.popBox&&(this.popBox.hide(),this.container.removeClass(this.parts.popUp).removeClass(this.parts.popDown)));if(this.popBox)if(this.options.dataSource instanceof Function){var c=this.options.dataSource;c(a,function(a){b._createPopList(a)})}else{for(var d=[],e=0;e<this.options.dataSource.length;e++)(this.options.dataSource[e]+"").indexOf(a)>-1&&d.push(this.options.dataSource[e]);this._createPopList(d)}},_bindEvents:function(){var a=this;this.container&&(this.element.unbind("focus"),this.element.focus(function(){a.container.addClass("focus")}),this.element.unbind("blur"),this.element.blur(function(){a.container.removeClass("focus")})),this.element.unbind("input propertychange"),this.element.bind("input propertychange",function(){a._trigger("inputChange",null,{value:a.element.val()}),a._refreshDataSource(a.element.val())}),this.element.unbind("keydown"),this.options.dataSource&&this._bindPopKeyEvent(),$(document.body).bind("mousedown",function(b){b.stopPropagation(),a.popBox&&!a.popBox.is(":hidden")&&b.target!==a.element.get(0)&&(wyHelper.isMouseIn(a.popBox,b)||(a.popBox.hide(),a.container.removeClass(a.parts.popUp).removeClass(a.parts.popDown)))})},_bindPopKeyEvent:function(){var a=this;this.element.keydown(function(b){var c=".wy-inputtext-pop-list-item[class~=selected]";if(40==b.keyCode||38==b.keyCode){var d=".wy-inputtext-pop-list-item",e=a.popBox.find(d).length,f=a.popBox.find(c),g=a.popBox.find(d).index(f);if(1>e)return;if(a.popBox.is(":hidden"))return void a._showPop();f.removeClass(a.parts.selected),40==b.keyCode?(g++,g>=e&&(g=0)):(0>g&&(g=e),g--);var h=a.popBox.find(".wy-inputtext-pop-list-item:eq("+g+")");return h.addClass("selected"),a.element.val(a._getItemText(h)),0==g?void a.popBox.mCustomScrollbar("scrollTo",0):(f=a.popBox.find(c),g=a.popBox.find(d).index(f),g==e-1?void a.popBox.mCustomScrollbar("scrollTo",a.popContent.outerHeight()):(40==b.keyCode&&h.position().top+a.popContent.position().top>a.popBox.height()-h.outerHeight()&&a.popBox.mCustomScrollbar("scrollTo",h.position().top-a.popBox.height()+h.outerHeight()+1),void(38==b.keyCode&&h.position().top+a.popContent.position().top<0&&a.popBox.mCustomScrollbar("scrollTo",h.position().top))))}return 13==b.keyCode?void a.popBox.find(c).click():void(27==b.keyCode&&a.popBox.hide())})},_isOrigin:function(){return this.options.preLab||this.options.sufLab?!1:this.options.preIcon||this.options.sufIcon?!1:this.options.button?!1:this.options.dataSource?!1:!0},disable:function(){this.element.prop("disabled",!0),this.container.addClass("disabled")},enable:function(){this.element.prop("disabled",!1),this.container.removeClass("disabled")}}),$(function(){$.widget("wy.wyListbox",{options:{groupCanSelect:!1,itemRenderer:null,dataSource:null,multiple:!0,vScroll:!0,hScroll:!1,filter:!0,minWidth:210,minHeight:250,searchPlaceholder:"inupt search text",theme:"",ignoreCase:!0,localFilter:null,ajaxFilter:null,useGroup:!1,textProperty:"text",valueProperty:"value",chilrenProperty:"children"},_width:0,_height:0,_content:null,_listContainer:null,_choices:null,_filter:null,_value:null,_create:function(){this._createUI(),this._bindEvents()},_init:function(){this._listContainer.html(""),this.options.dataSource?this._initListFromData():this._initListFromSource()},_createUI:function(){this.element.hasClass("wy-listbox")&&this.element.removeClass("wy-listbox"),this._width=this.element.outerWidth(),this._height=this.element.outerHeight(),this._choices=this.element.find("option"),this.element.wrap("<div class='wy-listbox "+this.options.theme+"'><span class='wy-source wy-listbox-source'></span></div>"),this._content=this.element.closest(".wy-listbox"),this._content.attr("style",this.element.attr("style")),this._content.css({minWidth:this.options.minWidth,minHeight:this.options.minHeight});var a=this.options.filter?"<div class='wy-listbox-filter'><i class='fa fa-search'></i><input placeholder='"+this.options.searchPlaceholder+"'/></div>":"";this.options.filter&&(this._content.append(a),this._filter=this._content.find(".wy-listbox-filter>input"));var b="<div class='wy-listbox-content'></div>";this._listContainer=$(b).appendTo(this._content),this.options.vScroll&&(this._listContainer=wyHelper.scroll(this._listContainer))},__filter:function(a,b){if(b=jQuery.trim(b),""===b)return!0;for(var c in a)if((a[c]+"").indexOf(b)>-1)return!0;return!1},_bindEvents:function(){var a=this;this._filter.bind("input propertyChange",function(b){var c,d=a._filter.val();if(null==a._value)a._value=d,a._trigger("filterChange",b,d);else{if(a._value==d)return;a._value=d,a._trigger("filterChange",b,d)}if(a.options.ajaxFilter)return void a.options.ajaxFilter(d,function(b){a.setDataSource(b,a.options.useGroup)});var e=a.options.localFilter?a.options.localFilter:a.__filter;a._listContainer.find(".selectable").each(function(){if(c=$(this).data("data"),d=a._filter.val(),a.options.ignoreCase){for(var b in c)c[b]&&c[b]instanceof String&&(c[b]=c[b].toUpperCase());d=d.toUpperCase()}$(this).html($(this).text()),e(c,d)?($(this).text().indexOf(d)>-1&&$(this).html($(this).text().replace(d,"<span class='wy-filter-key'>"+d+"</span>")),$(this).show()):$(this).hide()})})},_initListFromSource:function(){var a,b,c,d=this,e=this.element.children("optgroup");if(e&&e.length>0){var f=0;e.each(function(){b={text:$(this).attr("label"),value:$(this).attr("value")},a=d._addGroup(b.text,b.value,b,f++),c=$(this).children("option");var e=0;c.each(function(){b={text:$(this).html(),value:$(this).val()},d._addOption(b.text,b.value,a,b,e++)})})}else{c=this.element.children("option");var g=0;c.each(function(){b={text:$(this).html(),value:$(this).val()},d._addOption(b.text,b.value,null,b,g++)})}},_initListFromData:function(){this.options.dataSource&&this._setDataSource(this.options.dataSource,this.options.useGroup)},_addOption:function(a,b,c,d,e){var f=c||this._listContainer,g=this.options.itemRenderer?this.options.itemRenderer(d,e):a,h=$("<li class='wy-listbox-leaf selectable'>"+g+"</li>").data("value",b).data("data",d).appendTo(f);return this._bindItemEvent(h),h},_addGroup:function(a,b,c){var d=this.options.itemRenderer?this.options.itemRenderer(c):a,e=1==this.options.groupCanSelect?"selectable":"unselectable",f=$("<li class='wy-listbox-group'><div class='wy-listbox-group-header "+e+"'>"+d+"</div><ul></ul></li>").appendTo(this._listContainer);return f.children(".wy-listbox-group-header").data("value",b).data("data",c),this.options.groupCanSelect&&(this.element.append("<option value='"+b+"'>"+a+"</option>"),this._bindItemEvent(f.children(".wy-listbox-group-header"))),f.children("ul")},_bindItemEvent:function(a){var b,c=this;a.click(function(a){c.options.multiple||c._content.find(".selected").removeClass("selected"),$(this).toggleClass("selected"),b=$(this).data("data"),b.selected=$(this).hasClass("selected"),c._trigger("itemSelected",a,b)})},_setDataSource:function(a,b){var c,d,e,f;if(b){for(var g=0;g<a.length;g++)if(d=a[g],e=this._addGroup(d[this.options.textProperty],d[this.options.valueProperty],d,g),f=d[this.options.chilrenProperty])for(var h=0;h<f.length;h++)c=f[h],this._addOption(c[this.options.textProperty],c[this.options.valueProperty],e,c,h)}else for(var g=0;g<a.length;g++)c=a[g],this._addOption(c[this.options.textProperty],c[this.options.valueProperty],null,c,g)},setDataSource:function(a,b){this._listContainer.html(""),this._setDataSource(a,b)},getSelectedValue:function(){if(!this.options.multiple)return this._content.find(".selected").data("value");var a=[];return this._content.find(".selected").each(function(){$(this).data("value")&&a.push($(this).data("value"))}),a},getSelectedData:function(){if(!this.options.multiple)return this._content.find(".selected").data("data");var a=[];return this._content.find(".selected").each(function(){$(this).data("data")&&a.push($(this).data("data"))}),a},unselect:function(){this._content.find(".selected").removeClass("selected")}})}),$(function(){$.widget("wy.wyListview",{options:{gridWidth:150,gridHeight:150,listHeight:50,gridRender:null,listRender:null,dataSource:[],vScroll:!0,defaultView:"grid",yInterval:0,xInterval:0,intervalAverage:!0},_viewType:"",_content:null,_create:function(){this._content=this.element.addClass("wy-listview"),this.options.vScroll&&(this._content=wyHelper.scroll(this.element)),this._viewType=this.options.defaultView},_init:function(){this._content.html(""),this.options.dataSource&&this._createItemWithSource(this.options.dataSource),this._bindEvents(),this._sortable()},_sortable:function(){},_createItemWithSource:function(a){for(var b=0;b<a.length;b++)this._addItem(a[b],b);"grid"==this._viewType?this._adjustGridPosition():this._adjustListPosition()},_addItem:function(a,b){var c=this._createItem(a);this._content.append($(c).data("data",a).addClass("wy-listview-item"))},_createItem:function(a){return"grid"==this._viewType?"<div class='grid-item'>"+this._createGridItem(a)+"</div>":"list"==this._viewType?"<div class='list-item'>"+this._createListItem(a)+"</div>":void 0},_createGridItem:function(a){return this.options.gridRender?this.options.gridRender(a):void 0},_createListItem:function(a){return this.options.listRender?this.options.listRender(a):void 0},_adjustGridPosition:function(){var a=$("<div class='grid-item'></div>").appendTo(this._content),b=a?a.outerHeight():0,c=a?a.outerWidth():0;a.remove();var d=this._content.children(".wy-listview-item").length,e=Math.floor(this._content.innerWidth()/(c+this.options.xInterval)),f=Math.floor(d/e)+(d%e>0?1:0),g=0;this.options.intervalAverage&&(g=(this._content.innerWidth()-(e*c+e*this.options.xInterval+this.options.xInterval))/(e+1)),this._content.css({height:f*(b+this.options.yInterval+g)+(this.options.yInterval+g)});var h=this,i=0;this._content.children().each(function(){$(this).removeClass("list-item").addClass("grid-item").css({left:h.options.xInterval+g+i%e*(c+h.options.xInterval+g),top:(h.options.yInterval+g)*Math.floor(i/e+1)+b*Math.floor(i/e)}),i++})},_adjustListPosition:function(){var a=$("<div class='list-item'></div>").appendTo(this._content),b=a?a.outerHeight():0;a.remove();var c=this._content.children(".wy-listview-item").length;this._content.children(".list-item").addClass("grid-item").removeClass("list-item"),this._content.css({height:b*c+2*this.options.yInterval});var d=this,e=0;this._content.children().each(function(){$(this).removeClass("grid-item").addClass("list-item").css({left:d.options.xInterval,right:d.options.xInterval,top:d.options.yInterval+e*b}),e++})},_adjustPosition:function(){switch(this._viewType){case"list":this._adjustListPosition();break;case"grid":this._adjustGridPosition()}},_bindEvents:function(){var a=this;this.element.resize(function(){return"grid"==a._viewType?void a._adjustGridPosition():void("list"==a._viewType&&a._adjustListPosition())})},setDataSource:function(a){this.options.dataSource=a},toListView:function(){this._viewType="list";var a=this;this._content.find(".wy-listview-item").each(function(){$(this).html(a._createListItem($(this).data("data")))}),this._adjustListPosition()},toGridView:function(){this._viewType="grid";var a=this;this._content.find(".wy-listview-item").each(function(){$(this).html(a._createGridItem($(this).data("data")))}),this._adjustGridPosition()},toggleView:function(){return"list"==this._viewType?void this.toGridView():void("grid"==this._viewType&&this.toListView())},remove:function(a){this._content.children(".wy-listview-item").eq(a).remove(),this._adjustPosition()},removeItem:function(a){a&&(a.remove(),this._adjustPosition())},refresh:function(){this._adjustPosition()}})}),$(function(){$.widget("wy.wyLoader",{parts:{name:"wy-loader",ring:"wy-loader-ring"},options:{modal:!0,position:"center",awaysOnTop:!1,type:"ring",size:18,ringWidth:3,parent:null},_parentContainer:null,_content:null,_initOptions:{},_init:function(){},_create:function(){this.element.addClass(this.parts.name),this.options.parent?this._parentContainer=this.options.parent:this.options.awaysOnTop?this._parentContainer=wyHelper.getTopBody():this._parentContainer=$("body"),this._createUI()},_createUI:function(){switch(this.options.type){case"ring":this._createRing()}},_createRing:function(){this.element.addClass(this.parts.ring),this.options.size&&(this.element.css({width:this.options.size,height:this.options.size}),"ring"===this.options.type&&(this.element.find(":before").css({"border-radius":this.options.ringWidth}),this.element.find(":after").css({"border-radius":this.options.ringWidth}))),this.options.ringWidth&&"ring"===this.options.type&&(this.element.find(":before").css({"border-width":this.options.ringWidth}),this.element.find(":after").css({"border-width":this.options.ringWidth}))},_destroy:function(){this._super("_destroy")},show:function(){this.element.show()},hide:function(){this.element.hide()}})}),$.wyLoader={show:function(a){}},$(function(){$.widget("wy.wyNotification",{options:{autoDie:!0,life:1e5,yPostion:"top",levelIcon:{normal:"zmdi zmdi-comment-outline",info:"zmdi zmdi-info-outline",warn:"zmdi zmdi-alert-triangle",error:"zmdi zmdi-notifications-active"}},preNotifiTime:0,_create:function(){var a=$("body");this.element.addClass("wy-notification").appendTo(a).css({position:"fixed","z-index":wyHelper.WY_BASE_INDEX+50})},_renderNotification:function(a){var b="none";a.level&&(b=a.level);var c="";a.level&&(c=this.options.levelIcon[a.level]),a.life&&(this.options.life=a.life),a.effect||(a.effect="bounceIn");var d="<div style='z-index:"+(wyHelper.WY_BASE_INDEX+50)+"' class='animated "+a.effect+" wy-notification-item wy-notification-"+b+"'>";d+="<div class='wy-notification-icon'><i class='",d+=c,d+="'></i></div>",d+="<div class='wy-notification-content'>",d+="<div>"+(a.detail?a.detail:"")+"</div>",d+="</div>",d+="<div class='wy-ui-colse'><i class='zmdi zmdi-close'></i></div>",d+="</div>";var a=$(d);this._bindMessageEvents(a);{var e=(new Date).getTime();e-this.preNotifiTime}a.appendTo(this.element).fadeIn("normal")},_bindMessageEvents:function(a){var b=this;a.find(".wy-ui-colse>i").click(function(){b._removeNotification(a)}),this.options.autoDie&&b._autoDieTimeout(a)},_removeNotification:function(a){var b=this.options.autoDie;a.remove(),b&&window.clearTimeout(a.data("timeout"))},_autoDieTimeout:function(a){var b=this,c=window.setTimeout(function(){b._removeNotification(a)},this.options.life);a.data("timeout",c)},addNotification:function(a,b,c,d){c||(c=this.options.life),this._renderNotification({detail:a,level:b,life:c,effect:d})},addNotificationObj:function(a){this._renderNotification(a)},addaddNotifications:function(a){}})}),$(function(){$.widget("wy.wyPaginator",{options:{spanAlign:"center",pageSize:20,nowPage:1,recordTotal:1,pageSizeList:[10,20,30,40,50],pageGotoRange:10,pageLinksNum:5,height:"auto",width:"100%",textTemplate:"共<span>{RecordTotal}</span>条记录,共<span>{PageTotal}</span>页,每页<span>{PageSize}</span>条,当前第<span>{NowPage}</span>页",controlTemplate:"{PageInfo}{FirstPage}{PreviousPage}{PageLinks}{NextPage}{LastPage}{GoToPage}{pageSize}",spanStyle:"iconOnly",theme:""},_NowPage:1,_RecordTotal:0,_PageTotal:1,_PageSize:1,_changeTarget:null,_gotoSelect:null,_pageSizeSelect:null,_create:function(){this.element.hasClass("wy-paginator")||this.element.addClass("wy-paginator"),this.element.addClass(this.options.theme),this._createUI(),this._initEvent()},_init:function(){this._updateParams(),this._setPage(this.options.nowPage)},_createUI:function(){var a="";if(this.options.pageSizeList)for(var b=0;b<this.options.pageSizeList.length;b++)a+="<option value='"+this.options.pageSizeList[b]+"'>"+this.options.pageSizeList[b]+"</option>";var c="<div class='wy-paginator-pageinfo'></div>",d="<div class='wy-paginator-firstpage wy-paginator-pagespan'><a class='iconOnly'><i class='fa fa-angle-double-left'></i></a><a class='textOnly'>首页</a><a class='both'><i class='fa fa-step-backward'></i>首页</a></div>",e="<div class='wy-paginator-previouspage wy-paginator-pagespan'><a class='iconOnly'><i class='fa fa-angle-left'></i></a><a class='textOnly'>上一页</a><a class='both'><i class='fa fa-backward'></i>上一页</a></div>",f="<div class='wy-paginator-pagelinks wy-paginator-pagelinks"+this.options.spanStyle+"'></div>",g="<div class='wy-paginator-nextpage wy-paginator-pagespan'><a class='iconOnly'><i class='fa fa-angle-right'></i></a><a class='textOnly'>下一页</a><a class='both'><i class='fa fa-forward'></i>下一页</a></div>",h="<div class='wy-paginator-lastpage wy-paginator-pagespan'><a class='iconOnly'><i class='fa fa-angle-double-right'></i></a><a class='textOnly'>末页</a><a class='both'><i class='fa fa-step-forward'></i>末页</a></div>",i="<div class='wy-paginator-gotopage'><span class='text'>转到</span><select style='min-width: 40px;'></select><span class='text'>页</span></div>",j="<div class='wy-paginator-pagesizelist'><span class='text'>每页显示</span><select>"+a+"</select></div>",k=this.options.controlTemplate.replace("{PageInfo}",c).replace("{FirstPage}",d).replace("{PreviousPage}",e).replace("{PageLinks}",f).replace("{NextPage}",g).replace("{LastPage}",h).replace("{GoToPage}",i).replace("{pageSize}",j);this.element.html(k),this._gotoSelect=this.element.find(".wy-paginator-gotopage>select"),this._gotoSelect&&this._gotoSelect.wyDropdown({theme:"simple"}),this._pageSizeSelect=this.element.find(".wy-paginator-pagesizelist>select"),this._pageSizeSelect&&(this._pageSizeSelect.wyDropdown({theme:"simple"}),this.options.pageSize&&this._pageSizeSelect.wyDropdown("selectValue",this.options.pageSize,!0)),this.element.find(".wy-paginator-pagespan a").hide(),this.element.find("."+this.options.spanStyle).show()},_updateUI:function(){this._updatePageInfo(),this._updatePageNaviButton(),this._updatePageLinks(),this._updatePageGoToList()},_updatePageInfo:function(){var a=this.element.children(".wy-paginator-pageinfo");a&&this.element.children(".wy-paginator-pageinfo").html(this.options.textTemplate.replace("{RecordTotal}",this._RecordTotal+"").replace("{PageTotal}",this._PageTotal+"").replace("{PageSize}",this.options.pageSize+"").replace("{NowPage}",this._NowPage+""))},_updatePageNaviButton:function(){var a=this.element.find(".wy-paginator-firstpage"),b=this.element.find(".wy-paginator-previouspage"),c=this.element.find(".wy-paginator-nextpage"),d=this.element.find(".wy-paginator-lastpage");a&&(this._NowPage<=1?a.children("a").attr("disabled","disabled").addClass("disabled"):a.children("a").removeAttr("disabled").removeClass("disabled")),b&&(this._NowPage<=1?b.children("a").attr("disabled","disabled").addClass("disabled"):b.children("a").removeAttr("disabled").removeClass("disabled")),c&&(this._NowPage>=this._PageTotal?c.children("a").attr("disabled","disabled").addClass("disabled"):c.children("a").removeAttr("disabled").removeClass("disabled")),d&&(this._NowPage>=this._PageTotal?d.children("a").attr("disabled","disabled").addClass("disabled"):d.children("a").removeAttr("disabled").removeClass("disabled"))},_updatePageLinks:function(){var a=this.element.find(".wy-paginator-pagelinks");if(a){var b=parseInt(this._NowPage)-parseInt(this.options.pageLinksNum/2),c=parseInt(this._NowPage)+parseInt(this.options.pageLinksNum/2);b=1>b?1:b,c=c>this._PageTotal?this._PageTotal:c;for(var d="wy-paginator-pagelinks-default",e="",f=b;c>=f;f++)d=f==this._NowPage?"wy-paginator-pagelinks-current":"wy-paginator-pagelinks-default",e+="<span class='"+d+"' page='"+f+"'>"+f+"</span>";a.html(e);var g=this,h=this.element.find(".wy-paginator-pagelinks>span");h.click(function(a){g._setPage($(this).attr("page")),g._triggerPageChange(a);

})}},_updatePageGoToList:function(){var a=this.element.find(".wy-paginator-gotopage select");if(a){a.wyDropdown("removeAllOptions");var b=1,c=this._PageTotal,d=this.options.pageGotoRange;d>0&&(b=this._NowPage-d<1?1:this._NowPage-d,c=this._NowPage-0+d>this._PageTotal?this._PageTotal:this._NowPage-0+d);for(var e=b;c>=e;e++)a.wyDropdown("addOption",e+"",e);a.wyDropdown("selectValue",this._NowPage)}},_initEvent:function(){var a=this.element.find(".wy-paginator-firstpage>a"),b=this.element.find(".wy-paginator-previouspage>a"),c=this.element.find(".wy-paginator-nextpage>a"),d=this.element.find(".wy-paginator-lastpage>a"),e=this;a.click(function(a){e._setPage(1),e._triggerPageChange(a)}),b.click(function(a){e._setPage(e._NowPage-1),e._triggerPageChange(a)}),c.click(function(a){e._setPage(e._NowPage+1),e._triggerPageChange(a)}),d.click(function(a){e._setPage(e._PageTotal),e._triggerPageChange(a)}),e._gotoSelect.wyDropdown({change:function(a,b){b.changeFromUI&&(e._setPage(b.value),e._triggerPageChange(a))}}),this._pageSizeSelect.wyDropdown({change:function(a,b){e.options.pageSize=b.value,e._updateParams(),e._setPage(1),e._triggerPageChange(a)}})},_updateParams:function(){this._PageSize=this.options.pageSize,this._NowPage=this.options.nowPage,this._RecordTotal=this.options.recordTotal,this._PageTotal=Math.floor(this.options.recordTotal/this.options.pageSize)+(this.options.recordTotal%this.options.pageSize>0?1:0),this._PageTotal=0==this._PageTotal?1:this._PageTotal},_setPage:function(a){1>a&&(a=1),a>this._PageTotal&&(a=this._PageTotal),this._NowPage=a,this._updateUI()},_triggerPageChange:function(a){this._trigger("pageChange",a,{nowPage:this._NowPage-0,pageSize:this._PageSize})},updateData:function(a,b){this.options.nowPage=a,this.options.recordTotal=b,this._updateParams(),this._setPage(this.options.nowPage)},setOption:function(a,b){"nowPage"===a?this._setPage(b):$.Widget.prototype._setOption.apply(this,arguments)},getNowPage:function(){return this._NowPage},getPageSize:function(){return this._PageSize}})}),$(function(){$.widget("wy.wyPanel",{options:{vScroll:!0,hScroll:!1,footer:!1,button:{refresh:!0,close:!0,fullscreen:!0,toggle:!0},dbfullscreen:!1,theme:null,closing:null,customer:[]},fullscreenIcon:"zmdi-fullscreen",fullscreenExitIcon:"zmdi-fullscreen-exit",_container:null,_header:null,_content:null,_footer:null,_buttonbar:null,_btnRefresh:null,_btnClose:null,_btnFullscreen:null,_btnToggle:null,_create:function(){this._createUI(),this._adjustContainer(),this._createHeaderButtons(),this._createCustomerButtons(),this._bindEvent(),this._trigger("created")},_createUI:function(){this._container=this.element,this.element.addClass("wy-panel").contents().wrapAll("<div class='wy-panel-content'></div>"),this.options.theme&&this.element.addClass(this.options.theme),this._header=$("<div class='wy-panel-header user-select-none'><div class='wy-panel-header-left'></div><div class='wy-panel-header-text'></div><div class='wy-panel-header-right'></div></div>").prependTo(this.element),this._content=this.element.children(".wy-panel-content");var a=this.element.find(".wy-panel-footer");a?(this._content.addClass("has-footer"),this._footer=a.appendTo(this._container)):this.options.footer&&(this._footer=$("<div class='wy-panel-footer'></div>").appendTo(this._container),this._content.addClass("has-footer")),this.options.vScroll&&!this.options.hScroll&&(this._content=wyHelper.scroll(this._content)),!this.options.vScroll&&this.options.hScroll&&(this._content=wyHelper.scroll(this._content,{axis:"x",theme:"dark",scrollInertia:0})),this.options.vScroll&&this.options.hScroll&&(this._content=wyHelper.scroll(this._content,{axis:"xy",theme:"dark",scrollInertia:0})),this._header.children(".wy-panel-header-text").html(this.element.prop("title")),this.element.removeAttr("title")},_createHeaderButtons:function(){var a=this._header.children(".wy-panel-header-right");this.options.button.refresh&&(this._btnRefresh=$("<i title='刷新' class='fa fa-refresh'></i>").appendTo(a)),this.options.button.fullscreen&&(this._btnFullscreen=$("<i title='全屏' class='zmdi zmdi-fullscreen'></i>").appendTo(a)),this.options.button.toggle&&(this._btnToggle=$("<i title='收起' class='fa fa-chevron-down'></i>").appendTo(a)),this.options.button.close&&(this._btnClose=$("<i title='关闭' class='fa fa-times'></i>").appendTo(a))},_createCustomerButtons:function(){var a=this._header.children(".wy-panel-header-right");if(this.options.customer)for(var b=0;b<this.options.customer.length;b++)a.prepend(this.options.customer[b])},_bindEvent:function(){var a=this;this._btnClose&&this._btnClose.click(function(b){a.options.closing?a._trigger("closing",b,null):a.element.remove(),b.stopPropagation()}),this._btnRefresh&&this._btnRefresh.click(function(b){a._trigger("refresh",b,null),b.stopPropagation()}),this._btnToggle&&this._btnToggle.click(function(b){var c=a.element.hasClass("noheight")?"noheight-mini":"mini";a.element.toggleClass(c),a._btnToggle.toggleClass("fa-chevron-down").toggleClass("fa-chevron-up"),a._trigger("toggle",b,null),b.stopPropagation()}),this._btnFullscreen&&this._btnFullscreen.click(function(b){a.element.toggleClass("fullscreen"),a._btnFullscreen.toggleClass(a.fullscreenIcon).toggleClass(a.fullscreenExitIcon),a._trigger("fullscreen",b,null),b.stopPropagation()}),this._header.find(".wy-panel-header-right").dblclick(function(a){a.stopPropagation()}),this._header.dblclick(function(b){a.options.dbfullscreen&&(a.element.toggleClass("fullscreen"),a._btnFullscreen&&a._btnFullscreen.toggleClass(a.fullscreenIcon).toggleClass(a.fullscreenExitIcon),a._trigger("fullscreen",b,null))})},_adjustContainerSize:function(){var a=this._container.height();this._header&&(a-=this._header.outerHeight()),this._footer&&(a-=this._footer.outerHeight()),this._container.children(".wy-panel-content").height(a)},_adjustContainer:function(){this._header&&this._container.children(".wy-panel-content").css("top",this._header.outerHeight()),this._footer&&this._container.children(".wy-panel-content").css("bottom",this._footer.outerHeight())}})}),$.widget("wy.wySidepanel",{options:{parent:null,"float":"right",footerAlign:"right",hasHeader:!0,captionAlign:"left",initialVisible:!0,buttons:{full:!0,max:!0,refresh:!0,close:!0,toggle:!1},scroll:null},parts:{base:"wy-sidepanel",header:"wy-sidepanel-header",caption:"wy-sidepanel-caption",headerButtonBar:"wy-sidepanel-header-bottons",customerBar:"wy-sidepanel-header-customer",content:"wy-sidepanel-content",close:"wy-sidepanel-close",full:"wy-sidepanel-full",max:"wy-sidepanel-max",refresh:"wy-sidepanel-refresh",toggle:"wy-sidepanel-toggle",footer:"wy-sidepanel-footer",noHeader:"no-header"},icons:{close:icoDef.close,full:icoDef.full,fullOff:icoDef.fullOff,max:icoDef.max,maxOff:icoDef.maxOff,refresh:icoDef.refresh,toggle:{left:icoDef.chevronLeft,right:icoDef.chevronRight,top:icoDef.chevronUp,bottom:icoDef.chevronDown}},header:null,content:null,footer:null,caption:null,full:null,max:null,refresh:null,close:null,toggle:null,visibleStyle:null,hideStyle:null,isShowing:null,hideToValue:0,_create:function(){this.element.css("z-index",gConfig.baseIndex),this._readClassOptions(),this.element.addClass(this.parts.base).addClass(this.options["float"]),this.options.hasHeader||this.element.hasClass("no-header")||this.element.addClass(this.parts.noHeader),this._createUI(),this._bindEvents()},_readClassOptions:function(){this.element.hasClass("left")&&(this.options["float"]="left"),this.element.hasClass("right")&&(this.options["float"]="right"),this.element.hasClass("top")&&(this.options["float"]="top"),this.element.hasClass("bottom")&&(this.options["float"]="bottom"),this.element.hasClass("no-header")&&(this.options.hasHeader=!1)},_createUI:function(){var a,b,c,d,e,f;a=this.element.attr("title")?this.element.attr("title"):"",this.element.removeAttr("title"),c="<div class='"+this.parts.headerButtonBar+"'>";for(var g in this.options.buttons)this.options.buttons[g]&&"toggle"!=g&&(c+="<a class='"+this.parts[g]+"'><i class='"+this.icons[g]+"'></i></a>");c+="</div>",b="<div class='"+this.parts.header+"'><div style='text-align: "+this.options.captionAlign+"' class='"+this.parts.caption+"'>"+a+"</div><div class='"+this.parts.customerBar+"'></div>"+c+"</div>",e="<div class='"+this.parts.content+"'></div>";var h=this.icons.toggle[this.options["float"]];if(!this.options.initialVisible)switch(this.options["float"]){case"left":h=this.icons.toggle.right;break;case"right":h=this.icons.toggle.left;break;case"top":h=this.icons.toggle.bottom;break;case"bottom":h=this.icons.toggle.top}f="<a class='"+this.parts.toggle+" "+this.options["float"]+"'><i class='"+h+"'></i></a>",this.toggle=$(f),this.header=$(b),this.element.contents().wrapAll(e),this.content=this.element.find("."+this.parts.content),this.footer=this.element.find("."+this.parts.footer),this.footer?this.footer.addClass(this.options.footerAlign):(d="<div class='"+this.parts.footer+"' style='text-align: "+this.options.footerAlign+"'></div>",this.footer=$(d)),this.content.before(this.header).after(this.footer),this.options.buttons.toggle&&this.element.append(this.toggle),this.refresh=this.header.find("."+this.parts.refresh),this.max=this.header.find("."+this.parts.max),this.close=this.header.find("."+this.parts.close),this.full=this.header.find("."+this.parts.full),this.options.parent?(this.element.css("position","absolute").appendTo(this.options.parent),this.options.parent.css("overflow","hidden")):this.element.css("position","fixed"),this._adjustUI()},_adjustUI:function(){this.content.css({top:this.options.hasHeader?this.header.outerHeight():0,bottom:this.footer.outerHeight()}),this._adjustPostion(),this.element.css(this.options.initialVisible?this.visibleStyle:this.hideStyle),this.isShowing=this.options.initialVisible},_adjustPostion:function(){this.visibleStyle={},this.hideStyle={},this.visibleStyle[this.options["float"]]=0,("left"==this.options["float"]||"right"==this.options["float"])&&(this.hideStyle[this.options["float"]]=0-this.element.width(),this.hideToValue=this.element.width()),("top"==this.options["float"]||"bottom"==this.options["float"])&&(this.hideStyle[this.options["float"]]=0-this.element.height(),this.hideToValue=this.element.height())},_switchToggle:function(){this.options.buttons.toggle&&(("top"==this.options["float"]||"bottom"==this.options["float"])&&this.toggle.children("i").toggleClass(this.icons.toggle.top).toggleClass(this.icons.toggle.bottom),("left"==this.options["float"]||"right"==this.options["float"])&&this.toggle.children("i").toggleClass(this.icons.toggle.left).toggleClass(this.icons.toggle.right))},_bindEvents:function(){var a=this;this.toggle.click(function(){a.isShowing?a.hide():a.show()}),this.close&&this.close.click(function(){a.hide()}),this.refresh&&this.refresh.click(function(){this._trigger("refresh")}),this.max&&this.max.click(function(){a.maxToggle()}),this.full&&this.full.click(function(){a.fullToggle()})},maxToggle:function(){this.element.hasClass("max-size")?this.maxOff():this.maxOn()},fullToggle:function(){this.element.hasClass("full-size")?this.fullOff():this.fullOn()},maxOn:function(){this.element.removeClass("full-size"),this.element.addClass("max-size"),this.max.find("i").removeClass(this.icons.max).addClass(this.icons.maxOff),this._trigger("maxOn")},maxOff:function(){this.element.removeClass("full-size"),this.element.removeClass("max-size"),this.max.find("i").removeClass(this.icons.maxOff).addClass(this.icons.max),this._trigger("maxOff")},fullOn:function(){this.element.removeClass("max-size"),this.element.addClass("full-size"),this.full.find("i").removeClass(this.icons.full).addClass(this.icons.fullOff),this._trigger("fullOn")},fullOff:function(){this.element.removeClass("max-size"),this.element.removeClass("full-size"),this.full.find("i").removeClass(this.icons.fullOff).addClass(this.icons.full),this._trigger("fullOff")},show:function(){if(!this.isShowing){this._switchToggle(),$("body").css("overflow","hidden"),this.element.show();var a={};a[this.options["float"]]=0,this.element.animate(a,500),this.isShowing=!0,this._trigger("showing")}},hide:function(){if(this.isShowing){this.element.removeClass("max-size").removeClass("full-size"),this._switchToggle();var a={};a[this.options["float"]]=-1-this.hideToValue,this.element.animate(a,300),this.isShowing=!1,this._trigger("closing")}}}),$.widget("wy.wyTabview",{parts:{name:"wy-tabview",content:"wy-tabview-content",header:"wy-tabview-header",tab:"wy-tabview-tab",navButton:"wy-tabview-navbuttons",previousTab:"wy-tabview-previous-tab",nextTab:"wy-tabview-next-tab",closeTab:"wy-tabview-tabclose",naviable:"wy-tabview-naviable"},options:{activeIndex:0,fixed:!1,navMode:"none",sortable:!1},header:null,content:null,navButton:null,_create:function(){var a=this;this.element.addClass(this.parts.name),this.options.fixed&&this.element.addClass("fixed"),this.content=this.element.children("div").addClass(this.parts.content),this.content.children("div").hide(),this.element.children("ul").children("li").addClass(this.parts.tab),this.element.children("ul").wrap("<div class="+this.parts.header+"></div>"),this.header=this.element.children("."+this.parts.header),this.header.children("ul").children("li").removeClass(classDef.state.selected),this.content.children("div:eq("+this.options.activeIndex+")").show(),this.header.children("ul").children("li:eq("+this.options.activeIndex+")").addClass(classDef.state.selected),"button"===this.options.navMode&&(this.navButton=this._createNavButton(),this.element.append(this.navButton),this.element.addClass(this.parts.naviable)),this.header.find("."+this.parts.tab).each(function(){a._createTabTrigger($(this))}),this._bindEvents(),this.options.sortable&&this.header.find("ul").sortable({})},_bindEvents:function(){var a=this;this.header.find("."+this.parts.tab).each(function(){a._bindTabEvent($(this))}),"button"===this.options.navMode&&this._bindNavEvent()},_bindTabEvent:function(a){var b=this;a.click(function(){b._selectTab(a)})},_bindNavEvent:function(){var a=this;this.navButton.children("."+this.parts.previousTab).click(function(){var b=a._getSelectIndex();return 0==b?void a.selectTab(a.header.find("."+a.parts.tab).length-1):void a.selectTab(--b)}),this.navButton.children("."+this.parts.nextTab).click(function(){var b=a._getSelectIndex();return b>=a.header.find("."+a.parts.tab).length-1?void a.selectTab(0):void a.selectTab(++b)})},_createNavButton:function(){return $("<div class='"+this.parts.navButton+"'><i class=' "+this.parts.previousTab+" "+icoDef.previous+"'></i><i class='"+this.parts.nextTab+" "+icoDef.next+"'></i></div>")},_createNavCombobox:function(){},_createTabTrigger:function(a){var b=this,c=a.html();a.html(""),a.hasClass(classDef.closable)?(a.append("<div>"+c+"</div><i class='"+this.parts.closeTab+" "+icoDef.close+"'></i>"),a.children("."+this.parts.closeTab).click(function(c){var d=b.header.find("."+b.parts.tab).index(a),e=a.data("data");return b._trigger("remove",c,{index:d,tabNumber:b.getTabNumber(),data:e}),b.content.children("div:eq("+d+")").remove(),a.remove(),a.hasClass(classDef.state.selected)?(d>0?b.header.find("."+b.parts.tab+":eq("+--d+")").click():b.getTabNumber()>0&&b.header.find("."+b.parts.tab+":eq("+d+")").click(),void c.stopPropagation()):void b.header.find("."+b.parts.tab+":eq("+b._getSelectIndex()+")").click()})):a.append("<div>"+c+"</div>")},_getSelectIndex:function(){var a=this.header.find("."+classDef.state.selected);return this.header.find("."+this.parts.tab).index(a)},_selectTab:function(a,b){if(a||(a=this.header.find("."+this.parts.tab+":eq("+b+")")),b||(b=this.header.find("."+this.parts.tab).index(a)),this.header.find("."+this.parts.tab).removeClass(classDef.state.selected),a.addClass(classDef.state.selected),this.content.children("div").hide(),this.content.children("div:eq("+b+")").show(),"button"===this.options.navMode){var c=a.position();if(!c)return;var d=c.left,e=this.navButton.position().left,f=this.header.find("."+this.parts.tab+":first");d+a.outerWidth()>e?this.header.children("ul").animate({left:f.position().left-d+(this.header.innerWidth()-a.outerWidth()-7)},100):this.header.children("ul").animate({left:0},100)}this._trigger("select",null,{index:b,data:a.data("data")})},_destroy:function(){_super("_destroy")},_appendNewTab:function(a){var b=$("<li class='"+this.parts.tab+"'>"+a.title+"</li>");a.data&&b.data("data",a.data),0!=a.closable&&b.addClass(classDef.closable);var c=$("<div></div>");!a.index||a.index<1?(this.header.children("ul").append(b),this.content.append(c)):a.index>0&&(this.header.find("ul>li").eq(a.index-1).after(b),this.content.children("div:eq("+(a.index-1)+")").after(c)),this._createTabTrigger(b),this._bindTabEvent(b),a.scroll&&"iframe"!=a.contentType&&(c=wyHelper.scroll(c)),a.contentType&&"html"!=a.contentType||c.html(a.content),"url"==a.contentType&&c.load(a.content),"iframe"==a.contentType&&c.html("<iframe src='"+a.content+"' frameborder='0' scrolling='no' marginheight='0' marginwidth='0'></iframe>"),this._selectTab(b)},selectTab:function(a){this._selectTab(null,a)},add:function(a,b){if(b)return void this._appendNewTab(a);var c=this,d=!1;this.header.find("."+this.parts.tab).each(function(){if($.trim(a.title)===$.trim($(this).children("div").text())){if(a.reload){var b=c.header.find("."+c.parts.tab).index($(this));a.index=b,c.content.children("div:eq("+b+")").remove(),$(this).remove(),c._appendNewTab(a),d=!0}else c._selectTab($(this)),d=!0;return!1}}),d||this._appendNewTab(a)},getTabNumber:function(){return this.header.find("."+this.parts.tab).length}});var AppendType={inner:"inner",after:"after",before:"before"};$(function(){$.widget("wy.wyTree",{options:{hasToggler:!0,keyId:"ID",keyPid:"PID",hasCheck:!0,checkPropertyName:"ID",checkBindChild:!0,checkBindParent:!0,vScroll:!0,hScroll:!1,theme:"",dataSource:null,simpleData:!0,itemRenderer:function(a,b){return a.text},mutilple:!1,filter:null,accept:null,draggable:!0},_content:null,_dsTree:null,_checkBind:!0,_create:function(){this.element.addClass("wy-tree").addClass(this.options.theme),this._content=this.element,this.options.vScroll&&this.options.hScroll?this._content=wyHelper.scroll(this._content,{axis:"xy",theme:"dark",scrollInertia:0}):this.options.vScroll?this._content=wyHelper.scroll(this._content):this.options.hScroll&&(this._content=wyHelper.scroll(this._content,{axis:"y",theme:"dark",scrollInertia:0}))},_init:function(){this._content.html(""),this.options.dataSource&&(this._dsTree=this.options.simpleData?wyHelper.list2Tree(this.options.dataSource,{idname:this.options.keyId,pidname:this.options.keyPid}):this.options.dataSource,this._content.append(this._createTree(this._dsTree,1))),this._initDrag()},_initDrag:function(){var a=this;this.options.draggable&&this._content.find("li").draggable({helper:"clone",revert:"valid",distance:10,scroll:!0,handle:"span",appendTo:a._content,start:function(a,b){$(this).hasClass("opened")&&$(this).children(".wy-tree-toggler").click()},drag:function(b,c){a._getNodeByXy(c.helper)},stop:function(b,c){if($(".move-unacceptable").removeClass("move-unacceptable"),$(".move-inner").length>0){var d=$(c.helper.context).closest("li").closest("ul"),e=d.closest("li").data("data");e&&e.children&&e.children.remove($(this).data("data"));var f=$(".move-inner").closest("li").children("ul"),g=$(".move-inner").closest("ul"),h=g?g.attr("level")-0+1:1;f.length<1&&(f=$("<ul level='"+h+"'></ul>"),$(".move-inner").closest("li").append(f)),f.append($(this));var i=f.closest("li").data("data");i.children||(i.children=[]),i.children.push($(this).data("data")),d.children("li").length<1&&d.closest("li").children(".wy-tree-toggler").hide(),f.closest("li").children(".wy-tree-toggler").show();var j=$(this).data("data");j[a.options.keyPid]=f.closest("li").data("data")[a.options.keyId],$(this).data("data",j),$(".move-inner").removeClass("move-inner")}$(".node-drag-pt").hide(),$(this).children(".wy-tree-toggler").click(),a._trigger("nodeDraged",null,{oldParentData:e,newParentData:i,nodeData:j})}})},_getNodeByXy:function(a){var b=this;$(".move-inner").removeClass("move-inner"),$(".move-unacceptable").removeClass("move-unacceptable"),$(".node-drag-pt").hide();var c=a.children(".wy-tree-span"),d=c.offset().top,e=c.offset().left;this._content.find(".wy-tree-node:visible:not(.ui-draggable-dragging)").each(function(){if(a.attr("nodeid")==$(this).attr("nodeid"))return!0;var c=$(this).children(".wy-tree-span"),f=c.offset().top,g=c.offset().left,h=f+c.outerHeight()-d,i=g+c.outerWidth()-e;if(i>0&&i>.4*c.outerWidth()&&i<=c.outerWidth()&&h>0&&h>.4*c.outerHeight()&&h<c.outerHeight()){if(b.options.accept){var j=$(a.context).data("data"),k=b.getNodeData($(this)),l=b.options.accept.call(b.options.accept,k,j);if(!l)return c.addClass("move-unacceptable"),$(a).children("span").css("cursor","no-drop"),!1}$(a).children("span").css("cursor","pointer"),c.addClass("move-inner"),$(this).children(".node-drag-pt").show()}})},_createTree:function(a,b){var c=$("<ul level='"+b+"'></ul>");1==b&&c.addClass("wy-tree-root");for(var d=0;d<a.length;d++)this._createNode(a[d],c,b);return c},_createRoot:function(a){var b=$("<ul level='1'></ul>").addClass("wy-tree-root");this._createNode(a,b,1),this._content.append(b)},_bindNodeEvent:function(a){var b=this;a.children("span").click(function(a){b.options.mutilple?$(this).toggleClass("selected"):(b._content.find(".selected").removeClass("selected"),$(this).addClass("selected")),b._content.find(".current").removeClass("current"),$(this).addClass("current"),b._trigger("nodeSelect",a,{node:$(this),data:b.getNodeData($(this).closest("li")),isLeaf:$(this).closest("li").hasClass("wy-tree-leaf")})}),a.children(".wy-tree-toggler").click(function(){$(this).toggleClass("icon-minus-square").toggleClass("icon-plus-square");var a=$(this).closest("li");a.hasClass("opened")?$(this).nextAll("ul").slideUp("fast"):$(this).nextAll("ul").slideDown("fast"),a.toggleClass("opened").toggleClass("closed")})},_bindCheckEvent:function(a){var b=this;a.wyCheckbox({change:function(a,c){var d=$(this).closest("li").toggleClass("node-checked"),e=d.find("ul .wy-tree-node-check");b.options.checkBindChild&&b._checkBind&&e.wyCheckbox(c.checked?"check":"unCheck");var f=d.closest("ul"),g=f.closest("li").find(">.wy-checkbox .wy-tree-node-check");if(b.options.checkBindParent)if(c.checked){var h=f.find("li:not([class~=node-checked])").length;0==h&&g.wyCheckbox("check")}else{var i=f.find("li[class~=node-checked]").length,j=f.find("li").length;j>i&&(b._checkBind=!1,g.wyCheckbox("unCheck"),b._checkBind=!0)}}})},_createNode:function(a,b,c){var d,e;d=$("<li class='wy-tree-node opened'></li>").data("data",a).attr("nodeid",a[this.options.keyId]),this.options.hasToggler&&d.append(a.children?"<i class='icon-minus-square wy-tree-toggler user-select-none' style='margin-right: 6px;'></i>":"<i class='icon-minus-square wy-tree-toggler user-select-none' style='margin-right: 6px;display: none;'></i>"),this.options.hasCheck&&(e=$("<input type='checkbox' class='wy-tree-node-check' value='"+a[this.options.checkPropertyName]+"'/>").appendTo(d),e.wyCheckbox(),this._bindCheckEvent(e)),d.append("<i class='node-drag-pt zmdi zmdi-forward'></i>"),$("<span class='wy-tree-span'></span>").append(this.options.itemRenderer(a,d)).appendTo(d),a.children&&a.children.length>0?d.append(this._createTree(a.children,c+1)):d.addClass("wy-tree-leaf"),b.append(d),this._bindNodeEvent(d)},_nodeFilter:function(a,b){return""==b?!0:a.text&&a.text.indexOf(b)>-1?!0:!1},getSelectData:function(){var a=this,b=this._content.find(".selected");if(!b)return null;if(b.length<2){var c=b.closest("li").data("data");if(c){var d=a.getChildrenData(b.closest("li"));d&&(c.children=d)}return c}var e=[];return b.each(function(){var b=$(this).closest("li").data("data"),c=a.getChildrenData($(this));c&&(b.children=c),e.push(b)}),e},getNodeData:function(a){var b=this,c=a.data("data"),d=b.getChildrenData(a);return d&&(c.children=d),c},getChildrenData:function(a){var b=this,c=a.children("ul"),d=null;if(c&&c.length>0){d=[];var e;c.children("li").each(function(){e=$(this).data("data"),e.children=b.getChildrenData($(this)),d.push(e)})}return d},getCheckData:function(){var a=this._content.find("input[type=checkbox]:checked");if(!a)return null;if(a.length<2)return a.closest("li").data("data");var b=[];return a.each(function(){b.push($(this).closest("li").data("data"))}),b},append:function(a,b){var c,d;if(b?b instanceof jQuery?d=b:isNaN(b)||(d=this._content.find(".wy-tree-node[nodeId="+b+"]")):d=this._content.find(".wy-tree-node[nodeid="+a[this.options.keyPid]+"]"),!d||0==d.length)return void this._createRoot(a);var e=d.closest("ul"),f=e?e.attr("level")-0+1:1;c=d.children("ul"),(!c||c.length<1)&&(c=$("<ul level='"+f+"'></ul>"),d.children(".wy-tree-toggler")&&d.children(".wy-tree-toggler").length<1&&d.append('<i class="icon-minus-square wy-tree-toggler user-select-none" style="margin-right: 6px;"></i>'),d.children(".wy-tree-toggler").show(),d.removeClass("wy-tree-leaf").append(c),d.children(".wy-tree-toggler").click(function(){$(this).toggleClass("icon-minus-square").toggleClass("icon-plus-square");var a=$(this).closest("li");a.hasClass("opened")?$(this).nextAll("ul").slideUp("fast"):$(this).nextAll("ul").slideDown("fast"),a.toggleClass("opened").toggleClass("closed")})),this._createNode(a,c,f),this.options.dataSource.push(a);var g=d.data("data");g.children||(g.children=[]),g.children.push(a),this._initDrag()},remove:function(a,b){var c,d,e=this,f=a[this.options.keyPid];a instanceof jQuery?(c=a,a=c.data("data")):b?(b instanceof jQuery?d=b:isNaN(b)||(d=this._content.find(".wy-tree-node[nodeid="+b+"]")),c=d.find(".wy-tree-node[nodeid="+a[this.options.keyId]+"]")):a[this.options.keyPid]?(d=this._content.find(".wy-tree-node[nodeid="+a[this.options.keyPid]+"]"),c=d.length>0?d.find(".wy-tree-node[nodeid="+a[this.options.keyId]+"]"):this._content.find(".wy-tree-node[nodeid="+a[this.options.keyId]+"]")):c=this._content.find(".wy-tree-node[nodeid="+a[this.options.keyId]+"]"),c&&c.each(function(){$(this).data("data")[e.options.keyPid]==f&&e._remove($(this),d,a)})},_remove:function(a,b,c){var d=this,e=a.closest("ul"),f=e.closest("li");e.children().length<1&&(e.remove(),f.children(".wy-tree-toggler").remove()),a.find(".wy-tree-node").each(function(){for(var a=0;a<d.options.dataSource.length;a++)d.options.dataSource[a][d.options.keyId]==$(this).data("data")[d.options.keyId]&&d.options.dataSource.splice(a,1)});for(var g=0;g<d.options.dataSource.length;g++)d.options.dataSource[g][d.options.keyId]==c[d.options.keyId]&&d.options.dataSource.splice(g,1);var h=null;b&&b.length>0&&(h=b.data("data"),h.children&&h.children.remove(c,function(a,b){return a[d.options.keyId]==b[d.options.keyId]?!0:!1})),a.remove()},modify:function(a){var b,c=a[this.options.keyPid],d=this;a instanceof jQuery?(b=a,a=b.data("data")):b=this._content.find(".wy-tree-node[nodeid="+a[this.options.keyId]+"]"),b&&b.each(function(){if($(this).data("data")[d.options.keyPid]==c){$(this).children(".wy-tree-span").html("").append(d.options.itemRenderer(a,$(this))),$(this).data("data",a);for(var b=0;b<d.options.dataSource.length;b++)d.options.dataSource[b][d.options.keyId]==a[d.options.keyId]&&(d.options.dataSource[b]=a)}})},disableCheck:function(a,b){var c;a||(c=this._content.find("input[type=checkbox]")),c.wyCheckbox("disable")},enableCheck:function(a,b){var c;a||(c=this._content.find("input[type=checkbox]")),c.wyCheckbox("enable")},filterTree:function(a){var b=[],c=this.options.filter?this.options.filter:this._nodeFilter;if(this.options.dataSource)for(var d=0;d<this.options.dataSource.length;d++)c(this.options.dataSource[d],a)&&b.push(this.options.dataSource[d]);this._content.html(""),this._dsTree=wyHelper.list2Tree(b),this._content.append(this._createTree(this._dsTree,1))}})}),$(function(){$.widget("bm.bmPanel",$.wy.wyPanel,{}),$.widget("bm.bmListbox",$.wy.wyListbox,{}),$.widget("bm.bmListview",$.wy.wyListview,{}),$.widget("bm.bmLoader",$.wy.wyLoader,{}),$.widget("bm.bmNotification",$.wy.wyNotification,{}),$.widget("bm.bmPaginator",$.wy.wyPaginator,{}),$.widget("bm.bmSidepanel",$.wy.wySidepanel,{}),$.widget("bm.bmTabview",$.wy.wyTabview,{}),$.widget("bm.bmTree",$.wy.wyTree,{}),$.widget("bm.bmButton",$.wy.wyButton,{}),$.widget("bm.bmCheckbox",$.wy.wyCheckbox,{}),$.widget("bm.bmDatatable",$.wy.wyDatatable,{}),$.widget("bm.bmDialog",$.wy.wyDialog,{}),$.widget("bm.bmDropdown",$.wy.wyDropdown,{}),$.widget("bm.bmGroupButton",$.wy.wyGroupButton,{}),$.widget("bm.bmInputtext",$.wy.wyInputtext,{}),$.bmAlert=$.wyAlert});